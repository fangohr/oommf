<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>7.3.3 Energies‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide</title>
<!--Generated by LaTeXML (version 0.8.6) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on September 30, 2022.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="oommf.css" type="text/css">
<link rel="stylesheet" href="oommf-report.css" type="text/css">
<link rel="stylesheet" href="oommf-tweakfonts.css" type="text/css">
<link rel="stylesheet" href="oommf-navbar.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="sec_oxsext.html" title="7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="up up" href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="up up up" href="userguide.html" title="OOMMF User’s Guide">
<link rel="start" href="userguide.html" title="OOMMF User’s Guide">
<link rel="prev" href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="next" href="sec_oxsEvolvers.html" title="7.3.4 Evolvers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_oxsAtlases.html" title="7.3.1 Atlases ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_oxsEvolvers.html" title="7.3.4 Evolvers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_oxsDrivers.html" title="7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="subsection" href="oxsMIF.html" title="7.3.7 MIF Support Classes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="section" href="html_oxsiioutputs.html" title="7.1 OOMMF eXtensible Solver Interactive Interface: Oxsii ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="section" href="html_threadconsider.html" title="7.2 OOMMF eXtensible Solver Batch Interface: boxsi ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="section" href="sec_oxsext.html" title="7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="section" href="sec_contriboxsext.html" title="7.4 Contributed Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="chapter" href="disclaimer.html" title="Disclaimer ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_overview.html" title="Chapter 1 Overview of OOMMF ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_install.html" title="Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_quickstart.html" title="Chapter 3 Quick Start: Example OOMMF Session ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_arch.html" title="Chapter 4 OOMMF Architecture Overview ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_cll.html" title="Chapter 5 Command Line Launching ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmlaunch.html" title="Chapter 6 OOMMF Launcher/Control Interface: mmLaunch ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmprobed.html" title="Chapter 8 Micromagnetic Problem Editor: mmProbEd ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_filesource.html" title="Chapter 9 Micromagnetic Problem File Source: FileSource ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmsolve.html" title="Chapter 10 The 2D Micromagnetic Solver ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmdatatable.html" title="Chapter 11 Data Table Display: mmDataTable ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmgraph.html" title="Chapter 12 Data Graph Display: mmGraph ‣ OOMMF User’s Guide">
<link rel="chapter" href="html_mmdispdatascale.html" title="Chapter 13 Vector Field Display: mmDisp ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmarchive.html" title="Chapter 14 Data Archive: mmArchive ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmhelp.html" title="Chapter 15 Documentation Viewer: mmHelp ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_cmdutils.html" title="Chapter 16 Command Line Utilities ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mifformat.html" title="Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_odtformat.html" title="Chapter 18 Data Table File Format (ODT) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_vfformats.html" title="Chapter 19 Vector Field File Format (OVF) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_trouble.html" title="Chapter 20 Troubleshooting ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_credits.html" title="Chapter 21 Credits ‣ OOMMF User’s Guide">
<link rel="bibliography" href="bibliography.html" title="Bibliography ‣ OOMMF User’s Guide">
<link rel="index" href="index.html" title="Index ‣ OOMMF User’s Guide">
<meta name="keywords" lang="en" content="Oxs_CubicAnisotropy, Oxs_Demag, Oxs_Exchange6Ngbr, Oxs_ExchangePtwise, Oxs_Ext child classes, Oxs_FixedZeeman, Oxs_RandomSiteExchange, Oxs_ScriptUZeeman, Oxs_SimpleDemag, Oxs_StageZeeman, Oxs_TransformZeeman, Oxs_TwoSurfaceExchange, Oxs_UZeeman, Oxs_UniaxialAnisotropy, Oxs_UniformExchange">
</head>
<body>
<nav class="ltx_page_navbar"><a href="userguide.html" title="OOMMF User’s Guide" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">OOMMF User’s Guide</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="disclaimer.html" title="Disclaimer ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Disclaimer</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_overview.html" title="Chapter 1 Overview of OOMMF ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Overview of OOMMF</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_install.html" title="Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Installation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_quickstart.html" title="Chapter 3 Quick Start: Example OOMMF Session ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Quick Start: Example OOMMF Session</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_arch.html" title="Chapter 4 OOMMF Architecture Overview ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>OOMMF Architecture Overview</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_cll.html" title="Chapter 5 Command Line Launching ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Command Line Launching</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmlaunch.html" title="Chapter 6 OOMMF Launcher/Control Interface: mmLaunch ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>OOMMF Launcher/Control Interface: mmLaunch</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter">
<a href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>OOMMF eXtensible Solver</span></a>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section"><a href="html_oxsiioutputs.html" title="7.1 OOMMF eXtensible Solver Interactive Interface: Oxsii ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.1 </span>OOMMF eXtensible Solver Interactive Interface:
Oxsii</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="html_threadconsider.html" title="7.2 OOMMF eXtensible Solver Batch Interface: boxsi ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.2 </span>OOMMF eXtensible Solver Batch Interface: boxsi</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="sec_oxsext.html" title="7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3 </span>Standard Oxs_Ext Child Classes</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_oxsAtlases.html" title="7.3.1 Atlases ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.1 </span>Atlases</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.2 </span>Meshes</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection ltx_ref_self"><span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.3 </span>Energies</span></span></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_oxsEvolvers.html" title="7.3.4 Evolvers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.4 </span>Evolvers</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_oxsDrivers.html" title="7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.5 </span>Drivers</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.6 </span>Field Objects</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="oxsMIF.html" title="7.3.7 MIF Support Classes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.7 </span>MIF Support Classes</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="sec_contriboxsext.html" title="7.4 Contributed Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.4 </span>Contributed Oxs_Ext Child Classes</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmprobed.html" title="Chapter 8 Micromagnetic Problem Editor: mmProbEd ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Micromagnetic Problem Editor: mmProbEd</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_filesource.html" title="Chapter 9 Micromagnetic Problem File Source: FileSource ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Micromagnetic Problem File Source: FileSource</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmsolve.html" title="Chapter 10 The 2D Micromagnetic Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>The 2D Micromagnetic Solver</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmdatatable.html" title="Chapter 11 Data Table Display: mmDataTable ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Data Table Display: mmDataTable</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmgraph.html" title="Chapter 12 Data Graph Display: mmGraph ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Data Graph Display: mmGraph</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="html_mmdispdatascale.html" title="Chapter 13 Vector Field Display: mmDisp ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Vector Field Display: mmDisp</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmarchive.html" title="Chapter 14 Data Archive: mmArchive ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Data Archive: mmArchive</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmhelp.html" title="Chapter 15 Documentation Viewer: mmHelp ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Documentation Viewer: mmHelp</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_cmdutils.html" title="Chapter 16 Command Line Utilities ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Command Line Utilities</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mifformat.html" title="Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>Problem Specification File Formats (MIF)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_odtformat.html" title="Chapter 18 Data Table File Format (ODT) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Data Table File Format (ODT)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_vfformats.html" title="Chapter 19 Vector Field File Format (OVF) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Vector Field File Format (OVF)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_trouble.html" title="Chapter 20 Troubleshooting ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>Troubleshooting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_credits.html" title="Chapter 21 Credits ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">21 </span>Credits</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bibliography.html" title="Bibliography ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Bibliography</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="index.html" title="Index ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="sec_oxsext.html" title="7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3 </span>Standard Oxs_Ext Child Classes</span></a><a href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.2 </span>Meshes</span></a><a href="sec_oxsEvolvers.html" title="7.3.4 Evolvers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.4 </span>Evolvers</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_subsection ltx_authors_1line">
<h1 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.3.3 </span>Energies</h1>

<div id="p1" class="ltx_para">
<p class="ltx_p">The following subsections describe the available energy terms. In
order to be included in the simulation energy and field calculations,
each energy term must be declared in its own, top-level Specify block,
i.e., energy terms should not be declared inline inside other
<span class="ltx_text ltx_font_typewriter">Oxs_Ext</span> objects. There is no limitation on the number of energy
terms that may be specified in the input MIF file. Many of these
terms have spatially varying parameters that are initialized via
<a href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_italic">field_object_spec</a> entries in their
<a href="par_groupedLists.html" title="17.3.3 Specify Conventions ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref">Specify initialization block</a>.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Outputs:</span> For each magnetization configuration, three standard
outputs are provided by all energy terms: the scalar output
“Energy,” which is the total energy in joules contributed by this
energy term, the scalar field output “Energy density,” which is a
cell-by-cell map of the energy density in
J/m<math id="p2.m1" class="ltx_Math" alttext="{}^{3}" display="inline"><msup><mi></mi><mn>3</mn></msup></math>,
and the three-component vector field output “Field,” which is the
pointwise field in A/m. If the code was compiled with the macro
<span class="ltx_text ltx_font_typewriter">NDEBUG</span> not defined, then there will be an additional scalar
output, “Calc count,” which counts the number of times the term has
been calculated in the current simulation. This is intended for
debugging purposes only; this number should agree with the “Energy
calc count” value provided by the evolver.</p>
</div>
<div id="p3" class="ltx_para ltx_noindent">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:120%;">Anisotropy Energy
<br class="ltx_break"></span></p>
<dl id="Ch7.S3.I4" class="ltx_description">
<dt class="ltx_item"></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I4.p1" class="ltx_para">
<p class="ltx_p"><a name="PTUA" id="PTUA" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I4.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_UniaxialAnisotropy:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I4.ix1.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Uniaxial magneto-crystalline
anisotropy. The Specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_UniaxialAnisotropy:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      K1 </span><span class="ltx_text ltx_font_italic">K</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      Ha </span><span class="ltx_text ltx_font_italic">H</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      axis </span><span class="ltx_text ltx_font_italic">u</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
</span>}</p>
</blockquote>
<p class="ltx_p">Exactly one of either <span class="ltx_text ltx_font_bold">K1</span> or <span class="ltx_text ltx_font_bold">Ha</span> should be
specified, where <span class="ltx_text ltx_font_bold">K1</span> is the crystalline anisotropy constant
(in
J/m<math id="Ch7.S3.I4.ix1.p1.m1" class="ltx_Math" alttext="{}^{3}" display="inline"><msup><mi></mi><mn>3</mn></msup></math>),
and <span class="ltx_text ltx_font_bold">Ha</span> is the anistropy field (in A/m). In either case,
<span class="ltx_text ltx_font_bold">axis</span> is the anisotropy direction. <span class="ltx_text ltx_font_bold">K1</span>,
<span class="ltx_text ltx_font_bold">Ha</span>, and <span class="ltx_text ltx_font_bold">axis</span> may each be varied cellwise across
the mesh: <span class="ltx_text ltx_font_bold">K1</span> and <span class="ltx_text ltx_font_bold">Ha</span> are initialized with scalar
field objects, while <span class="ltx_text ltx_font_bold">axis</span> takes a vector field object. (A
constant value will be interpreted as a uniform field object having
the stated value, as usual.) The axis direction must be non-zero at
each point, and will be normalized to unit magnitude before being
used.</p>
</div>
<div id="Ch7.S3.I4.ix1.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The axis direction is an easy axis if <span class="ltx_text ltx_font_bold">K1</span> (or <span class="ltx_text ltx_font_bold">Ha</span>)
is <math id="Ch7.S3.I4.ix1.p2.m1" class="ltx_Math" alttext="&gt;" display="inline"><mo>&gt;</mo></math>0, in which case the cellwise anisotropy energy density (in
J/m<math id="Ch7.S3.I4.ix1.p2.m2" class="ltx_Math" alttext="{}^{3}" display="inline"><msup><mi></mi><mn>3</mn></msup></math>) is given by</p>
<table id="Ch7.Ex2" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex2.m1" class="ltx_Math" alttext="E_{i}=K_{i}(1-\textbf{m}_{i}\cdot\textbf{u}_{i})^{2}\qquad\mbox{or}\qquad\frac%
{1}{2}\,\mu_{0}M_{s}H_{i}(1-\textbf{m}_{i}\cdot\textbf{u}_{i})^{2}," display="block"><mrow><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><mrow><msub><mi>K</mi><mi>i</mi></msub><mo>⁢</mo><msup><mrow><mo stretchy="false">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐮</mtext><mi>i</mi></msub></mrow></mrow><mo stretchy="false">)</mo></mrow><mn>2</mn></msup></mrow><mo mathvariant="italic" separator="true">  </mo><mtext>or</mtext><mo mathvariant="italic" separator="true">  </mo><mrow><mpadded width="+1.7pt"><mfrac><mn>1</mn><mn>2</mn></mfrac></mpadded><mo>⁢</mo><msub><mi>μ</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>M</mi><mi>s</mi></msub><mo>⁢</mo><msub><mi>H</mi><mi>i</mi></msub><mo>⁢</mo><msup><mrow><mo stretchy="false">(</mo><mrow><mn>1</mn><mo>-</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐮</mtext><mi>i</mi></msub></mrow></mrow><mo stretchy="false">)</mo></mrow><mn>2</mn></msup></mrow></mrow></mrow><mo>,</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">respectively. (Here <math id="Ch7.S3.I4.ix1.p2.m3" class="ltx_Math" alttext="m_{i}" display="inline"><msub><mi>m</mi><mi>i</mi></msub></math> is the unit magnetization and <math id="Ch7.S3.I4.ix1.p2.m4" class="ltx_Math" alttext="M_{s}" display="inline"><msub><mi>M</mi><mi>s</mi></msub></math> the
saturation magnetization in cell <math id="Ch7.S3.I4.ix1.p2.m5" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>.) Otherwise, if <span class="ltx_text ltx_font_bold">K1</span>
(or <span class="ltx_text ltx_font_bold">Ha</span>) is <math id="Ch7.S3.I4.ix1.p2.m6" class="ltx_Math" alttext="&lt;0" display="inline"><mrow><mi></mi><mo>&lt;</mo><mn>0</mn></mrow></math>, the axis direction is the normal to the
easy plane and the cellwise anisotropy energy density is given by
</p>
<table id="Ch7.Ex3" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex3.m1" class="ltx_Math" alttext="E_{i}=-K_{i}(\textbf{m}_{i}\cdot\textbf{u}_{i})^{2}\qquad\mbox{or}\qquad-\frac%
{1}{2}\,\mu_{0}M_{s}H_{i}(\textbf{m}_{i}\cdot\textbf{u}_{i})^{2}." display="block"><mrow><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><mrow><mo>-</mo><mrow><msub><mi>K</mi><mi>i</mi></msub><mo>⁢</mo><msup><mrow><mo stretchy="false">(</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐮</mtext><mi>i</mi></msub></mrow><mo stretchy="false">)</mo></mrow><mn>2</mn></msup></mrow></mrow><mo mathvariant="italic" separator="true">  </mo><mtext>or</mtext><mo mathvariant="italic" separator="true">  </mo><mrow><mo>-</mo><mrow><mpadded width="+1.7pt"><mfrac><mn>1</mn><mn>2</mn></mfrac></mpadded><mo>⁢</mo><msub><mi>μ</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>M</mi><mi>s</mi></msub><mo>⁢</mo><msub><mi>H</mi><mi>i</mi></msub><mo>⁢</mo><msup><mrow><mo stretchy="false">(</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐮</mtext><mi>i</mi></msub></mrow><mo stretchy="false">)</mo></mrow><mn>2</mn></msup></mrow></mrow></mrow></mrow><mo>.</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">The formulae in the two cases (easy axis vs. easy plane) differ by a
constant offset, and in each case the energy is non-negative.</p>
</div>
<div id="Ch7.S3.I4.ix1.p3" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">diskarray.mif</span>, <span class="ltx_text ltx_font_typewriter">stdprob3.mif</span>, <span class="ltx_text ltx_font_typewriter">grill.mif</span>.</p>
</div>
<div id="Ch7.S3.I4.ix1.p4" class="ltx_para">
<p class="ltx_p"><a name="PTCA" id="PTCA" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I4.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_CubicAnisotropy:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I4.ix2.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Cubic magneto-crystalline anisotropy.
The Specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_CubicAnisotropy:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      K1 </span><span class="ltx_text ltx_font_italic">K</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      Ha </span><span class="ltx_text ltx_font_italic">H</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      axis1 <math id="Ch7.S3.I4.ix2.p1.m1" class="ltx_Math" alttext="u_{1}" display="inline"><msub><mi>u</mi><mn mathvariant="normal">1</mn></msub></math> 
<br class="ltx_break">
      axis2 <math id="Ch7.S3.I4.ix2.p1.m2" class="ltx_Math" alttext="u_{2}" display="inline"><msub><mi>u</mi><mn mathvariant="normal">2</mn></msub></math> 
<br class="ltx_break">
</span>}</p>
</blockquote>
<p class="ltx_p">Exactly one of either <span class="ltx_text ltx_font_bold">K1</span> or <span class="ltx_text ltx_font_bold">Ha</span> should be
specified, where <span class="ltx_text ltx_font_bold">K1</span> is the crystalline anisotropy constant
(in
J/m<math id="Ch7.S3.I4.ix2.p1.m3" class="ltx_Math" alttext="{}^{3}" display="inline"><msup><mi></mi><mn>3</mn></msup></math>),
and <span class="ltx_text ltx_font_bold">Ha</span> is the anistropy field (in A/m). In either case,
<span class="ltx_text ltx_font_bold">axis1</span> and <span class="ltx_text ltx_font_bold">axis2</span> are two anisotropy directions;
the third anisotropy axis <math id="Ch7.S3.I4.ix2.p1.m4" class="ltx_Math" alttext="u_{3}" display="inline"><msub><mi>u</mi><mn>3</mn></msub></math> is computed as the vector product,
<math id="Ch7.S3.I4.ix2.p1.m5" class="ltx_Math" alttext="u_{1}\times u_{2}" display="inline"><mrow><msub><mi>u</mi><mn>1</mn></msub><mo>×</mo><msub><mi>u</mi><mn>2</mn></msub></mrow></math>. For each cell, the axis directions are easy axes if
<span class="ltx_text ltx_font_bold">K1</span> (or <span class="ltx_text ltx_font_bold">Ha</span>) is <math id="Ch7.S3.I4.ix2.p1.m6" class="ltx_Math" alttext="&gt;" display="inline"><mo>&gt;</mo></math>0, or hard axes if
<span class="ltx_text ltx_font_bold">K1</span> (or <span class="ltx_text ltx_font_bold">Ha</span>) is <math id="Ch7.S3.I4.ix2.p1.m7" class="ltx_Math" alttext="&lt;" display="inline"><mo>&lt;</mo></math>0. All may be varied cellwise
across the mesh. <span class="ltx_text ltx_font_bold">K1</span> or <span class="ltx_text ltx_font_bold">Ha</span> is initialized with a
scalar field object, and the axis directions are initialized with
vector field objects. (Constant values will be interpreted as uniform
fields with the indicated value, as usual.) The <span class="ltx_text ltx_font_bold">axis1</span> and
<span class="ltx_text ltx_font_bold">axis2</span> directions must be mutually orthogonal and non-zero
at each point (<math id="Ch7.S3.I4.ix2.p1.m8" class="ltx_Math" alttext="u_{1}" display="inline"><msub><mi>u</mi><mn>1</mn></msub></math> and <math id="Ch7.S3.I4.ix2.p1.m9" class="ltx_Math" alttext="u_{2}" display="inline"><msub><mi>u</mi><mn>2</mn></msub></math> are automatically scaled to unit
magnitude before use).
</p>
</div>
<div id="Ch7.S3.I4.ix2.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The anisotropy energy density (in J/m<math id="Ch7.S3.I4.ix2.p2.m1" class="ltx_Math" alttext="{}^{3}" display="inline"><msup><mi></mi><mn>3</mn></msup></math>) for cell <math id="Ch7.S3.I4.ix2.p2.m2" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> is given by</p>
<table id="Ch7.Ex4" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex4.m1" class="ltx_Math" alttext="E_{i}=K_{i}\left(a_{1}^{2}a_{2}^{2}+a_{2}^{2}a_{3}^{2}+a_{3}^{2}a_{1}^{2}%
\right)," display="block"><mrow><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><msub><mi>K</mi><mi>i</mi></msub><mo>⁢</mo><mrow><mo>(</mo><mrow><mrow><msubsup><mi>a</mi><mn>1</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>2</mn><mn>2</mn></msubsup></mrow><mo>+</mo><mrow><msubsup><mi>a</mi><mn>2</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>3</mn><mn>2</mn></msubsup></mrow><mo>+</mo><mrow><msubsup><mi>a</mi><mn>3</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>1</mn><mn>2</mn></msubsup></mrow></mrow><mo>)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">or</p>
<table id="Ch7.Ex5" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex5.m1" class="ltx_Math" alttext="E_{i}=\frac{1}{2}\,\mu_{0}M_{s}H_{i}\left(a_{1}^{2}a_{2}^{2}+a_{2}^{2}a_{3}^{2%
}+a_{3}^{2}a_{1}^{2}\right)," display="block"><mrow><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><mpadded width="+1.7pt"><mfrac><mn>1</mn><mn>2</mn></mfrac></mpadded><mo>⁢</mo><msub><mi>μ</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>M</mi><mi>s</mi></msub><mo>⁢</mo><msub><mi>H</mi><mi>i</mi></msub><mo>⁢</mo><mrow><mo>(</mo><mrow><mrow><msubsup><mi>a</mi><mn>1</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>2</mn><mn>2</mn></msubsup></mrow><mo>+</mo><mrow><msubsup><mi>a</mi><mn>2</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>3</mn><mn>2</mn></msubsup></mrow><mo>+</mo><mrow><msubsup><mi>a</mi><mn>3</mn><mn>2</mn></msubsup><mo>⁢</mo><msubsup><mi>a</mi><mn>1</mn><mn>2</mn></msubsup></mrow></mrow><mo>)</mo></mrow></mrow></mrow><mo>,</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">where <math id="Ch7.S3.I4.ix2.p2.m3" class="ltx_Math" alttext="a_{1}=\textbf{m}\cdot\textbf{u}_{1}" display="inline"><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>=</mo><mrow><mtext>𝐦</mtext><mo>⋅</mo><msub><mtext>𝐮</mtext><mn>1</mn></msub></mrow></mrow></math>, <math id="Ch7.S3.I4.ix2.p2.m4" class="ltx_Math" alttext="a_{2}=\textbf{m}\cdot\textbf{u}_{2}" display="inline"><mrow><msub><mi>a</mi><mn>2</mn></msub><mo>=</mo><mrow><mtext>𝐦</mtext><mo>⋅</mo><msub><mtext>𝐮</mtext><mn>2</mn></msub></mrow></mrow></math>, <math id="Ch7.S3.I4.ix2.p2.m5" class="ltx_Math" alttext="a_{3}=\textbf{m}\cdot\textbf{u}_{3}" display="inline"><mrow><msub><mi>a</mi><mn>3</mn></msub><mo>=</mo><mrow><mtext>𝐦</mtext><mo>⋅</mo><msub><mtext>𝐮</mtext><mn>3</mn></msub></mrow></mrow></math>, for reduced (normalized) magnetization <math id="Ch7.S3.I4.ix2.p2.m6" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> and
orthonormal anisotropy axes <math id="Ch7.S3.I4.ix2.p2.m7" class="ltx_Math" alttext="\textbf{u}_{1}" display="inline"><msub><mtext>𝐮</mtext><mn>1</mn></msub></math>, <math id="Ch7.S3.I4.ix2.p2.m8" class="ltx_Math" alttext="\textbf{u}_{2}" display="inline"><msub><mtext>𝐮</mtext><mn>2</mn></msub></math>, and <math id="Ch7.S3.I4.ix2.p2.m9" class="ltx_Math" alttext="\textbf{u}_{3}" display="inline"><msub><mtext>𝐮</mtext><mn>3</mn></msub></math> at cell <math id="Ch7.S3.I4.ix2.p2.m10" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>.
In the second form, <math id="Ch7.S3.I4.ix2.p2.m11" class="ltx_Math" alttext="M_{s}" display="inline"><msub><mi>M</mi><mi>s</mi></msub></math> is the saturation magnetization in cell <math id="Ch7.S3.I4.ix2.p2.m12" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>.
For each cell, if <span class="ltx_text ltx_font_bold">K1</span> (resp. <span class="ltx_text ltx_font_bold">Ha</span>) is <math id="Ch7.S3.I4.ix2.p2.m13" class="ltx_Math" alttext="&gt;" display="inline"><mo>&gt;</mo></math>0 then
the computed energy will be non-negative, otherwise for <span class="ltx_text ltx_font_bold">K1</span>
(resp. <span class="ltx_text ltx_font_bold">Ha</span>) <math id="Ch7.S3.I4.ix2.p2.m14" class="ltx_Math" alttext="&lt;" display="inline"><mo>&lt;</mo></math>0 the computed energy will be non-positive.</p>
</div>
<div id="Ch7.S3.I4.ix2.p3" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">cgtest.mif</span>, <span class="ltx_text ltx_font_typewriter">sample2.mif</span>, <span class="ltx_text ltx_font_typewriter">grill.mif</span>.</p>
</div>
</dd>
</dl>
</div>
<div id="p4" class="ltx_para ltx_noindent">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:120%;">Exchange Energy
<br class="ltx_break"></span></p>
<dl id="Ch7.S3.I5" class="ltx_description">
<dt class="ltx_item"></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.p1" class="ltx_para">
<p class="ltx_p"><a name="PTE6" id="PTE6" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I5.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_Exchange6Ngbr:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.ix1.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Standard 6-neighbor exchange energy. The
exchange energy density contribution from cell <math id="Ch7.S3.I5.ix1.p1.m1" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> is given by</p>
<table id="eq:ExchangeEnergy" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.E1.m1" class="ltx_Math" alttext="E_{i}=\sum_{j\in N_{i}}A_{ij}\frac{\textbf{m}_{i}\cdot\left(\textbf{m}_{i}-%
\textbf{m}_{j}\right)}{\Delta_{ij}^{2}}" display="block"><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mi>j</mi><mo>∈</mo><msub><mi>N</mi><mi>i</mi></msub></mrow></munder><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub><mo>⁢</mo><mfrac><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><mrow><mo>(</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>-</mo><msub><mtext>𝐦</mtext><mi>j</mi></msub></mrow><mo>)</mo></mrow></mrow><msubsup><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mn>2</mn></msubsup></mfrac></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7.1)</span></td>
</tr>
</table>
<p class="ltx_p">where <math id="Ch7.S3.I5.ix1.p1.m2" class="ltx_Math" alttext="N_{i}" display="inline"><msub><mi>N</mi><mi>i</mi></msub></math> is the set consisting of the 6 cells nearest to cell <math id="Ch7.S3.I5.ix1.p1.m3" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>,
<math id="Ch7.S3.I5.ix1.p1.m4" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is the exchange coefficient between cells <math id="Ch7.S3.I5.ix1.p1.m5" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> and <math id="Ch7.S3.I5.ix1.p1.m6" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math> in J/m,
and <math id="Ch7.S3.I5.ix1.p1.m7" class="ltx_Math" alttext="\Delta_{ij}" display="inline"><msub><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is the discretization step size between cell <math id="Ch7.S3.I5.ix1.p1.m8" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> and
cell <math id="Ch7.S3.I5.ix1.p1.m9" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math> (in meters).</p>
</div>
<div id="Ch7.S3.I5.ix1.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The Specify block for this term has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_Exchange6Ngbr:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      default_A </span><span class="ltx_text ltx_font_italic">value
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      atlas </span><span class="ltx_text ltx_font_italic">atlas_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      A </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            </span><span class="ltx_text ltx_font_italic"> region-1 region-1 A<math id="Ch7.S3.I5.ix1.p2.m1" class="ltx_Math" alttext="{}_{11}" display="inline"><msub><mi></mi><mn mathvariant="normal">11</mn></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            </span><span class="ltx_text ltx_font_italic"> region-1 region-2 A<math id="Ch7.S3.I5.ix1.p2.m2" class="ltx_Math" alttext="{}_{12}" display="inline"><msub><mi></mi><mn mathvariant="normal">12</mn></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            …
<br class="ltx_break">
            </span><span class="ltx_text ltx_font_italic"> region-m region-n A<math id="Ch7.S3.I5.ix1.p2.m3" class="ltx_Math" alttext="{}_{mn}" display="inline"><msub><mi></mi><mrow><mi>m</mi><mo mathvariant="italic">⁢</mo><mi>n</mi></mrow></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">or
</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_Exchange6Ngbr:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      default_lex </span><span class="ltx_text ltx_font_italic">value
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      atlas </span><span class="ltx_text ltx_font_italic">atlas_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      lex </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            </span><span class="ltx_text ltx_font_italic"> region-1 region-1 lex<math id="Ch7.S3.I5.ix1.p2.m4" class="ltx_Math" alttext="{}_{11}" display="inline"><msub><mi></mi><mn mathvariant="normal">11</mn></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            </span><span class="ltx_text ltx_font_italic"> region-1 region-2 lex<math id="Ch7.S3.I5.ix1.p2.m5" class="ltx_Math" alttext="{}_{12}" display="inline"><msub><mi></mi><mn mathvariant="normal">12</mn></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            …
<br class="ltx_break">
            </span><span class="ltx_text ltx_font_italic"> region-m region-n lex<math id="Ch7.S3.I5.ix1.p2.m6" class="ltx_Math" alttext="{}_{mn}" display="inline"><msub><mi></mi><mrow><mi>m</mi><mo mathvariant="italic">⁢</mo><mi>n</mi></mrow></msub></math> 
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">where <span class="ltx_text ltx_font_bold">lex</span> specifies the magnetostatic-exchange length, in
meters, defined by <math id="Ch7.S3.I5.ix1.p2.m7" class="ltx_Math" alttext="{\rm lex}=\sqrt{2A/(\mu_{0}M_{s}^{2})}" display="inline"><mrow><mi>lex</mi><mo>=</mo><msqrt><mrow><mrow><mn>2</mn><mo>⁢</mo><mi>A</mi></mrow><mo>/</mo><mrow><mo stretchy="false">(</mo><mrow><msub><mi>μ</mi><mn>0</mn></msub><mo>⁢</mo><msubsup><mi>M</mi><mi>s</mi><mn>2</mn></msubsup></mrow><mo stretchy="false">)</mo></mrow></mrow></msqrt></mrow></math>.</p>
</div>
<div id="Ch7.S3.I5.ix1.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">In the first case, the <span class="ltx_text ltx_font_bold">A</span> block specifies <math id="Ch7.S3.I5.ix1.p3.m1" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> values
on a region by region basis, where the regions are labels declared by
<span class="ltx_text ltx_font_italic">atlas_spec</span>. This allows for specification of <math id="Ch7.S3.I5.ix1.p3.m2" class="ltx_Math" alttext="A" display="inline"><mi>A</mi></math> both
inside a given region (e.g., <math id="Ch7.S3.I5.ix1.p3.m3" class="ltx_Math" alttext="A_{ii}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>i</mi></mrow></msub></math>) and along interfaces between
regions (e.g., <math id="Ch7.S3.I5.ix1.p3.m4" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math>). By symmetry, if <math id="Ch7.S3.I5.ix1.p3.m5" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is specified,
then the same value is automatically assigned to <math id="Ch7.S3.I5.ix1.p3.m6" class="ltx_Math" alttext="A_{ji}" display="inline"><msub><mi>A</mi><mrow><mi>j</mi><mo>⁢</mo><mi>i</mi></mrow></msub></math> as well.
The <span class="ltx_text ltx_font_bold">default_A</span> value is applied to any otherwise
unassigned <math id="Ch7.S3.I5.ix1.p3.m7" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math>.</p>
</div>
<div id="Ch7.S3.I5.ix1.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">In the second case, one specifies the magnetostatic-exchange length
instead of <math id="Ch7.S3.I5.ix1.p4.m1" class="ltx_Math" alttext="A" display="inline"><mi>A</mi></math>, but the interpretation is otherwise analogous.</p>
</div>
<div id="Ch7.S3.I5.ix1.p5" class="ltx_para ltx_align_left">
<p class="ltx_p">Although one may specify <math id="Ch7.S3.I5.ix1.p5.m1" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> (resp. <math id="Ch7.S3.I5.ix1.p5.m2" class="ltx_Math" alttext="{\rm lex}_{ij}" display="inline"><msub><mi>lex</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math>) for any
pair of regions <math id="Ch7.S3.I5.ix1.p5.m3" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> and <math id="Ch7.S3.I5.ix1.p5.m4" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math>, it is only required and only active if
the region pair are in contact. If long-range exchange interaction
is required, use <span class="ltx_text ltx_font_typewriter">Oxs_TwoSurfaceExchange</span>.</p>
</div>
<div id="Ch7.S3.I5.ix1.p6" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs,
<span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span> provides three scalar outputs involving the
angle between spins at neighboring cells:</p>
<ul id="Ch7.S3.I5.ix1.I1" class="ltx_itemize">
<li id="Ch7.S3.I5.ix1.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I5.ix1.I0.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Max Spin Ang:</span> maximum angle, in degrees, between
neigboring spins for the current magnetization state.</p>
</div>
</li>
<li id="Ch7.S3.I5.ix1.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I5.ix1.I0.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Stage Max Spin Ang:</span> Maximum value of <span class="ltx_text ltx_font_typewriter">Max Spin Ang</span>
for the current stage.</p>
</div>
</li>
<li id="Ch7.S3.I5.ix1.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I5.ix1.I0.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Run Max Spin Ang:</span> Maximum value obtained by
<span class="ltx_text ltx_font_typewriter">Max Spin Ang</span> during the simulation.</p>
</div>
</li>
</ul>
</div>
<div id="Ch7.S3.I5.ix1.p7" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">grill.mif</span>, <span class="ltx_text ltx_font_typewriter">spinvalve.mif</span>, <span class="ltx_text ltx_font_typewriter">tclshapes.mif</span>.</p>
</div>
<div id="Ch7.S3.I5.ix1.p8" class="ltx_para">
<p class="ltx_p"><a name="PTUE" id="PTUE" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I5.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_UniformExchange:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.ix2.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Similar to <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>, except the exchange constant <math id="Ch7.S3.I5.ix2.p1.m1" class="ltx_Math" alttext="A" display="inline"><mi>A</mi></math>
(or exchange length <math id="Ch7.S3.I5.ix2.p1.m2" class="ltx_Math" alttext="{\rm lex}" display="inline"><mi>lex</mi></math>) is uniform across all space. The
Specify block is very simple, consisting of either the label
<span class="ltx_text ltx_font_bold">A</span> with the desired exchange coefficient value in J/m, or
the label <span class="ltx_text ltx_font_bold">lex</span> with the desired magnetostatic-exchange
length in meters. Since <span class="ltx_text ltx_font_typewriter">A</span> (resp. <span class="ltx_text ltx_font_typewriter">lex</span>) is not spatially
varying, it is initialized with a simple constant (as opposed to a
scalar field object).</p>
</div>
<div id="Ch7.S3.I5.ix2.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs,
<span class="ltx_text ltx_font_typewriter">Oxs_UniformExchange</span> provides the three scalar outputs
<span class="ltx_text ltx_font_typewriter">Max Spin Ang</span>, <span class="ltx_text ltx_font_typewriter">Stage Max Spin Ang</span>, and
<span class="ltx_text ltx_font_typewriter">Run Max Spin Ang</span> as described for <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>.
These values are also accessible through the MIF <a href="sec_mif2ExtensionCommands.html#html:GetStateData" title="item GetStateData ‣ 17.3.2 MIF 2.1 Extension Commands ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">GetStateData</a> command.</p>
</div>
<div id="Ch7.S3.I5.ix2.p3" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">sample.mif</span>, <span class="ltx_text ltx_font_typewriter">cgtest.mif</span>, <span class="ltx_text ltx_font_typewriter">stdprob3.mif</span>.</p>
</div>
<div id="Ch7.S3.I5.ix2.p4" class="ltx_para">
<p class="ltx_p"><a name="PTEP" id="PTEP" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I5.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_ExchangePtwise:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.ix3.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">The exchange coefficient <math id="Ch7.S3.I5.ix3.p1.m1" class="ltx_Math" alttext="A_{i}" display="inline"><msub><mi>A</mi><mi>i</mi></msub></math> is specified on
a point-by-point (or cell-by-cell) basis, as opposed to the pairwise
specification model used by <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>. The exchange
energy density at a cell <math id="Ch7.S3.I5.ix3.p1.m2" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> is computed across its nearest 6 neighbors,
<math id="Ch7.S3.I5.ix3.p1.m3" class="ltx_Math" alttext="N_{i}" display="inline"><msub><mi>N</mi><mi>i</mi></msub></math>, using the formula</p>
<table id="Ch7.Ex6" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex6.m1" class="ltx_Math" alttext="E_{i}=\sum_{j\in N_{i}}A_{ij,{\rm eff}}\frac{\textbf{m}_{i}\cdot\left(\textbf{%
m}_{i}-\textbf{m}_{j}\right)}{\Delta_{ij}^{2}}" display="block"><mrow><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mrow><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mi>j</mi><mo>∈</mo><msub><mi>N</mi><mi>i</mi></msub></mrow></munder><mrow><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub><mo>⁢</mo><mfrac><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><mrow><mo>(</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>-</mo><msub><mtext>𝐦</mtext><mi>j</mi></msub></mrow><mo>)</mo></mrow></mrow><msubsup><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mn>2</mn></msubsup></mfrac></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">where <math id="Ch7.S3.I5.ix3.p1.m4" class="ltx_Math" alttext="\Delta_{ij}" display="inline"><msub><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is the discretization step size from cell <math id="Ch7.S3.I5.ix3.p1.m5" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> to
cell <math id="Ch7.S3.I5.ix3.p1.m6" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math> in meters, and</p>
<table id="Ch7.Ex7" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex7.m1" class="ltx_Math" alttext="A_{ij,{\rm eff}}=\frac{2A_{i}A_{j}}{A_{i}+A_{j}}," display="block"><mrow><mrow><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mo>⁢</mo><msub><mi>A</mi><mi>i</mi></msub><mo>⁢</mo><msub><mi>A</mi><mi>j</mi></msub></mrow><mrow><msub><mi>A</mi><mi>i</mi></msub><mo>+</mo><msub><mi>A</mi><mi>j</mi></msub></mrow></mfrac></mrow><mo>,</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">with <math id="Ch7.S3.I5.ix3.p1.m7" class="ltx_Math" alttext="A_{ij,{\rm eff}}=0" display="inline"><mrow><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub><mo>=</mo><mn>0</mn></mrow></math> if <math id="Ch7.S3.I5.ix3.p1.m8" class="ltx_Math" alttext="A_{i}" display="inline"><msub><mi>A</mi><mi>i</mi></msub></math> and <math id="Ch7.S3.I5.ix3.p1.m9" class="ltx_Math" alttext="A_{j}" display="inline"><msub><mi>A</mi><mi>j</mi></msub></math> are 0.</p>
</div>
<div id="Ch7.S3.I5.ix3.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">Note that <math id="Ch7.S3.I5.ix3.p2.m1" class="ltx_Math" alttext="A_{ij,{\rm eff}}" display="inline"><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></math> satisfies
the following properties:</p>
<table id="Ch21.S0.EGx1" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tbody id="Ch7.Ex8"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Ch7.Ex8.m1" class="ltx_Math" alttext="\displaystyle A_{ij,{\rm eff}}" display="inline"><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="Ch7.Ex8.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Ch7.Ex8.m3" class="ltx_Math" alttext="\displaystyle A_{ji,{\rm eff}}" display="inline"><msub><mi>A</mi><mrow><mrow><mi>j</mi><mo>⁢</mo><mi>i</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="Ch7.Ex9"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Ch7.Ex9.m1" class="ltx_Math" alttext="\displaystyle A_{ij,{\rm eff}}" display="inline"><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="Ch7.Ex9.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Ch7.Ex9.m3" class="ltx_Math" alttext="\displaystyle A_{i}\qquad\mbox{if $A_{i}=A_{j}$}" display="inline"><mrow><msub><mi>A</mi><mi>i</mi></msub><mo mathvariant="italic" separator="true">  </mo><mrow><mtext>if </mtext><mrow><msub><mi>A</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>j</mi></msub></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="Ch7.Ex10"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Ch7.Ex10.m1" class="ltx_Math" alttext="\displaystyle\lim_{A_{i}\downarrow 0}A_{ij,{\rm eff}}" display="inline"><mrow><munder><mo movablelimits="false">lim</mo><mrow><msub><mi>A</mi><mi>i</mi></msub><mo>↓</mo><mn>0</mn></mrow></munder><mo>⁡</mo><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="Ch7.Ex10.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Ch7.Ex10.m3" class="ltx_Math" alttext="\displaystyle 0." display="inline"><mrow><mn>0</mn><mo>.</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p">Additionally, if <math id="Ch7.S3.I5.ix3.p2.m2" class="ltx_Math" alttext="A_{i}" display="inline"><msub><mi>A</mi><mi>i</mi></msub></math> and <math id="Ch7.S3.I5.ix3.p2.m3" class="ltx_Math" alttext="A_{j}" display="inline"><msub><mi>A</mi><mi>j</mi></msub></math> are non-negative,</p>
<table id="Ch7.Ex11" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex11.m1" class="ltx_Math" alttext="\min(A_{i},A_{j})\leq A_{ij,{\rm eff}}\leq\max(A_{i},A_{j})." display="block"><mrow><mrow><mrow><mi>min</mi><mo>⁡</mo><mrow><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo>,</mo><msub><mi>A</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mrow><mo>≤</mo><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub><mo>≤</mo><mrow><mi>max</mi><mo>⁡</mo><mrow><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo>,</mo><msub><mi>A</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mrow></mrow><mo>.</mo></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">Evaluating the exchange energy with this formulation of <math id="Ch7.S3.I5.ix3.p2.m4" class="ltx_Math" alttext="A_{ij,{\rm eff}}" display="inline"><msub><mi>A</mi><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow><mo>,</mo><mi>eff</mi></mrow></msub></math> is equivalent to finding the minimum possible exchange energy
between cells <math id="Ch7.S3.I5.ix3.p2.m5" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> and <math id="Ch7.S3.I5.ix3.p2.m6" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math> under the assumption that <math id="Ch7.S3.I5.ix3.p2.m7" class="ltx_Math" alttext="A_{i}" display="inline"><msub><mi>A</mi><mi>i</mi></msub></math> and <math id="Ch7.S3.I5.ix3.p2.m8" class="ltx_Math" alttext="A_{j}" display="inline"><msub><mi>A</mi><mi>j</mi></msub></math>
are constant in each of the two cells. Similar considerations are
made in computing the exchange energy for a <a href="sec_partgeometry.html#html:mifvariablethickness" title="6th item ‣ 5th item ‣ 17.1.3 Part geometry ‣ 17.1 MIF 1.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref">2D variable
thickness model</a> <cite class="ltx_cite ltx_citemacro_cite">[<a href="bibliography.html#bib17" title="Generalization of a two-dimensional micromagnetic model to non-uniform thickness" class="ltx_ref">24</a>]</cite>.</p>
</div>
<div id="Ch7.S3.I5.ix3.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">The Specify block for <span class="ltx_text ltx_font_typewriter">Oxs_ExchangePtwise</span> has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_ExchangePtwise:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      A </span><span class="ltx_text ltx_font_italic">scalarfield_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">where <span class="ltx_text ltx_font_italic">scalarfield_spec</span> is an arbitrary
<a href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref">scalar field object</a> returning the desired exchange
coefficient in J/m.</p>
</div>
<div id="Ch7.S3.I5.ix3.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs,
<span class="ltx_text ltx_font_typewriter">Oxs_ExchangePtwise</span> provides the three scalar outputs
<span class="ltx_text ltx_font_typewriter">Max Spin Ang</span>, <span class="ltx_text ltx_font_typewriter">Stage Max Spin Ang</span>, and
<span class="ltx_text ltx_font_typewriter">Run Max Spin Ang</span> as described for <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>.
</p>
</div>
<div id="Ch7.S3.I5.ix3.p5" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Example:</span> <span class="ltx_text ltx_font_typewriter">antidots-filled.mif</span>.</p>
</div>
<div id="Ch7.S3.I5.ix3.p6" class="ltx_para">
<p class="ltx_p"><a name="PTTS" id="PTTS" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I5.ix4" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_TwoSurfaceExchange:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.ix4.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Provides long-range bilinear and biquadratic exchange. Typically
used to simulate RKKY-style coupling across non-magnetic spacers in
spinvalves. The specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_TwoSurfaceExchange:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      sigma </span><span class="ltx_text ltx_font_italic">value
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      sigma2 </span><span class="ltx_text ltx_font_italic">value
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      surface1 </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            atlas </span><span class="ltx_text ltx_font_italic">atlas_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            region </span><span class="ltx_text ltx_font_italic">region_label
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarfield </span><span class="ltx_text ltx_font_italic">scalarfield_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarvalue </span><span class="ltx_text ltx_font_italic">fieldvalue
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarside </span><span class="ltx_text ltx_font_italic">side
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      surface2 </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            atlas </span><span class="ltx_text ltx_font_italic">atlas_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            region </span><span class="ltx_text ltx_font_italic">region_label
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarfield </span><span class="ltx_text ltx_font_italic">scalarfield_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarvalue </span><span class="ltx_text ltx_font_italic">fieldvalue
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
            scalarside </span><span class="ltx_text ltx_font_italic">side
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">Here <span class="ltx_text ltx_font_bold">sigma</span> and <span class="ltx_text ltx_font_bold">sigma2</span> are the bilinear and
biquadratic surface (interfacial) exchange energies, in
J/m<math id="Ch7.S3.I5.ix4.p1.m1" class="ltx_Math" alttext="{}^{2}" display="inline"><msup><mi></mi><mn>2</mn></msup></math>. Either is optional, with default value 0.</p>
</div>
<div id="Ch7.S3.I5.ix4.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">surface1</span> and <span class="ltx_text ltx_font_bold">surface2</span> sub-blocks describe
the two interacting surfaces. Each description consists of 5
name-values pairs, which must be listed in the order shown. In each
sub-block, <span class="ltx_text ltx_font_italic">atlas_spec</span> specifies an atlas, and
<span class="ltx_text ltx_font_italic">region_label</span> specifies a region in that atlas. These bound
the extent of the desired surface. The following
<span class="ltx_text ltx_font_bold">scalarfield</span>, <span class="ltx_text ltx_font_bold">scalarvalue</span> and
<span class="ltx_text ltx_font_bold">scalarside</span> entries define a discretized surface inside the
bounding region. Here <span class="ltx_text ltx_font_italic">scalarfield_spec</span> references a scalar
field object, <span class="ltx_text ltx_font_italic">fieldvalue</span> should be a floating point value,
and <span class="ltx_text ltx_font_italic">side</span> should be one of <span class="ltx_text ltx_font_typewriter">&lt;</span>, <span class="ltx_text ltx_font_typewriter">&lt;=</span>, <span class="ltx_text ltx_font_typewriter">&gt;=</span>, or
<span class="ltx_text ltx_font_typewriter">&gt;</span>. Any point for which the scalar field object takes a value
less than, less than or equal, greater than or equal, or greater
than, respectively, the <span class="ltx_text ltx_font_typewriter">scalarvalue</span> value is considered to be
“inside” the surface. (Values <span class="ltx_text ltx_font_typewriter">-</span> and <span class="ltx_text ltx_font_typewriter">+</span> for <span class="ltx_text ltx_font_italic">side</span>
are deprecated synonyms for <span class="ltx_text ltx_font_typewriter">&lt;=</span> and <span class="ltx_text ltx_font_typewriter">&gt;=</span>.) The discretized
surface determined is the set of all points on the problem mesh that
are in the bounding region, are “inside” the surface, and have a
(nearest-) neighbor that is “outside” (i.e., not inside) the
surface. A neighbor is determined by the mesh; in a typical
rectangular mesh each cell has six neighbors.</p>
</div>
<div id="Ch7.S3.I5.ix4.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">In this way, 2 discrete lists of cells representing the two
surfaces are obtained. Each cell from the first list (representing
<span class="ltx_text ltx_font_typewriter">surface1</span>) is then matched with the closest cell from the
second list (i.e., from <span class="ltx_text ltx_font_typewriter">surface2</span>). Note the asymmetry in
this matching process: each cell from the first list is included in
exactly one match, but there may be cells in the second list that
are included in many match pairs, or in none. If the two surfaces
are of different sizes, then in practice typically the smaller will
be made the first surface, because this will usually lead to fewer
multiply-matched cells, but this designation is not required.</p>
</div>
<div id="Ch7.S3.I5.ix4.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">The resulting exchange energy density at cell <math id="Ch7.S3.I5.ix4.p4.m1" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> on one surface
from matching cell <math id="Ch7.S3.I5.ix4.p4.m2" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math> on the other is given by</p>
<table id="Ch7.Ex12" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Ch7.Ex12.m1" class="ltx_Math" alttext="E_{ij}=\frac{\sigma\left[1-\textbf{m}_{i}\cdot\textbf{m}_{j}\right]+\sigma_{2}%
\left[1-\left(\textbf{m}_{i}\cdot\textbf{m}_{j}\right)^{2}\right]}{\Delta_{ij}}" display="block"><mrow><msub><mi>E</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mrow><mrow><mi>σ</mi><mo>⁢</mo><mrow><mo>[</mo><mrow><mn>1</mn><mo>-</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐦</mtext><mi>j</mi></msub></mrow></mrow><mo>]</mo></mrow></mrow><mo>+</mo><mrow><msub><mi>σ</mi><mn>2</mn></msub><mo>⁢</mo><mrow><mo>[</mo><mrow><mn>1</mn><mo>-</mo><msup><mrow><mo>(</mo><mrow><msub><mtext>𝐦</mtext><mi>i</mi></msub><mo>⋅</mo><msub><mtext>𝐦</mtext><mi>j</mi></msub></mrow><mo>)</mo></mrow><mn>2</mn></msup></mrow><mo>]</mo></mrow></mrow></mrow><msub><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></mfrac></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">where <math id="Ch7.S3.I5.ix4.p4.m3" class="ltx_Math" alttext="\sigma" display="inline"><mi>σ</mi></math> and <math id="Ch7.S3.I5.ix4.p4.m4" class="ltx_Math" alttext="\sigma_{2}" display="inline"><msub><mi>σ</mi><mn>2</mn></msub></math>, respectively, are the bilinear and
biquadratic surface exchange coefficients between the two surfaces,
in J/m<math id="Ch7.S3.I5.ix4.p4.m5" class="ltx_Math" alttext="{}^{2}" display="inline"><msup><mi></mi><mn>2</mn></msup></math>, <math id="Ch7.S3.I5.ix4.p4.m6" class="ltx_Math" alttext="\textbf{m}_{i}" display="inline"><msub><mtext>𝐦</mtext><mi>i</mi></msub></math> and <math id="Ch7.S3.I5.ix4.p4.m7" class="ltx_Math" alttext="\textbf{m}_{j}" display="inline"><msub><mtext>𝐦</mtext><mi>j</mi></msub></math> are the normalized, unit spins
(i.e., magnetization directions) at cells <math id="Ch7.S3.I5.ix4.p4.m8" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> and <math id="Ch7.S3.I5.ix4.p4.m9" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math>, and
<math id="Ch7.S3.I5.ix4.p4.m10" class="ltx_Math" alttext="\Delta_{ij}" display="inline"><msub><mi mathvariant="normal">Δ</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is the discretization cell size in the direction from
cell <math id="Ch7.S3.I5.ix4.p4.m11" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math> towards cell <math id="Ch7.S3.I5.ix4.p4.m12" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math>, in meters. Note that if <math id="Ch7.S3.I5.ix4.p4.m13" class="ltx_Math" alttext="\sigma" display="inline"><mi>σ</mi></math> is
negative, then the surfaces will be anti-ferromagnetically coupled.
Likewise, if <math id="Ch7.S3.I5.ix4.p4.m14" class="ltx_Math" alttext="\sigma_{2}" display="inline"><msub><mi>σ</mi><mn>2</mn></msub></math> is negative, then the biquadratic term will
favor orthogonal alignment.</p>
</div>
<div id="Ch7.S3.I5.ix4.p5" class="ltx_para ltx_align_left">
<p class="ltx_p">The following example produces an antiferromagnetic exchange coupling
between the lower surface of the “top” layer and the upper surface
of the “bottom” layer, across a middle “spacer” layer. The
simple <span class="ltx_text ltx_font_typewriter">Oxs_LinearScalarField</span> object is used here to provide
level surfaces that are planes orthogonal to the <math id="Ch7.S3.I5.ix4.p5.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math>-axis. In
practice this example might represent a spinvalve, where the top and
bottom layers would be composed of ferromagnetic material and the
middle layer could be a copper spacer.
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
Specify Oxs_MultiAtlas:atlas {
    atlas { Oxs_BoxAtlas {
        name top
        xrange {0 500e-9}
        yrange {0 250e-9}
        zrange {6e-9 9e-9}
    } }
    atlas { Oxs_BoxAtlas {
        name spacer
        xrange {0 500e-9}
        yrange {0 250e-9}
        zrange {3e-9 6e-9}
    } }
    atlas { Oxs_BoxAtlas {
        name bottom
        xrange {0 500e-9}
        yrange {0 250e-9}
        zrange {0 3e-9}
    } }
}

Specify Oxs_LinearScalarField:zheight {
    vector {0 0 1}
    norm   1.0
}

Specify Oxs_TwoSurfaceExchange:AF {
    sigma -1e-4
    surface1 {
               atlas  :atlas
              region  bottom
         scalarfield  :zheight
         scalarvalue  3e-9
          scalarside  &lt;=
    }
    surface2 {
               atlas  :atlas
              region  top
         scalarfield  :zheight
         scalarvalue  6e-9
          scalarside  &gt;=
    }
}
</pre>
</blockquote>
</div>
<div id="Ch7.S3.I5.ix4.p6" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs,
<span class="ltx_text ltx_font_typewriter">Oxs_TwoSurfaceExchange</span> provides the three scalar outputs
<span class="ltx_text ltx_font_typewriter">Max Spin Ang</span>, <span class="ltx_text ltx_font_typewriter">Stage Max Spin Ang</span>, and
<span class="ltx_text ltx_font_typewriter">Run Max Spin Ang</span> as described for <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>.</p>
</div>
<div id="Ch7.S3.I5.ix4.p7" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Example:</span> <span class="ltx_text ltx_font_typewriter">spinvalve-af.mif</span>.</p>
</div>
<div id="Ch7.S3.I5.ix4.p8" class="ltx_para">
<p class="ltx_p"><a name="PTSE" id="PTSE" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I5.ix5" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_RandomSiteExchange:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I5.ix5.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">A randomized exchange energy. The Specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_RandomSiteExchange:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      linkprob </span><span class="ltx_text ltx_font_italic">probability</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      Amin </span><span class="ltx_text ltx_font_italic">A_lower_bound</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      Amax </span><span class="ltx_text ltx_font_italic">A_upper_bound</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
</span>}</p>
</blockquote>
<p class="ltx_p">Each adjacent pair of cells <math id="Ch7.S3.I5.ix5.p1.m1" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>, <math id="Ch7.S3.I5.ix5.p1.m2" class="ltx_Math" alttext="j" display="inline"><mi>j</mi></math>, is given <span class="ltx_text ltx_font_bold">linkprob</span>
probability of having a non-zero exchange coefficient <math id="Ch7.S3.I5.ix5.p1.m3" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math>. Here
two cells are adjacent if they lie in each other’s 6-neighborhood.
If a pair is found to have a non-zero exchange coefficient, then
<math id="Ch7.S3.I5.ix5.p1.m4" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> is drawn uniformly from the range <math id="Ch7.S3.I5.ix5.p1.m5" class="ltx_Math" alttext="[\texttt{Amin},\texttt{Amax}]" display="inline"><mrow><mo stretchy="false">[</mo><mtext>𝙰𝚖𝚒𝚗</mtext><mo>,</mo><mtext>𝙰𝚖𝚊𝚡</mtext><mo stretchy="false">]</mo></mrow></math>.
The exchange energy is computed using (<a href="#eq:ExchangeEnergy" title="(7.1) ‣ item Oxs_Exchange6Ngbr: ‣ 7.3.3 Energies ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7.1</span></a>), the
formula used by the <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span> energy object. The
value <math id="Ch7.S3.I5.ix5.p1.m6" class="ltx_Math" alttext="A_{ij}" display="inline"><msub><mi>A</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math> for each pair of cells is determined during problem
initialization, and is held fixed thereafter. The limits
<span class="ltx_text ltx_font_italic">A_lower_bound</span> and <span class="ltx_text ltx_font_italic">A_upper_bound</span> may be any real
numbers; negative values may be used to weaken the exchange
interaction arising from other exchange energy terms. The only
restriction is that <span class="ltx_text ltx_font_italic">A_lower_bound</span> must not be greater than
<span class="ltx_text ltx_font_italic">A_upper_bound</span>. The <span class="ltx_text ltx_font_typewriter">linkprob</span> value <span class="ltx_text ltx_font_italic">probability</span>
must lie in the range <math id="Ch7.S3.I5.ix5.p1.m7" class="ltx_Math" alttext="[0,1]" display="inline"><mrow><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></math>.</p>
</div>
<div id="Ch7.S3.I5.ix5.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs,
<span class="ltx_text ltx_font_typewriter">Oxs_RandomSiteExchange</span> provides the three scalar outputs
<span class="ltx_text ltx_font_typewriter">Max Spin Ang</span>, <span class="ltx_text ltx_font_typewriter">Stage Max Spin Ang</span>, and
<span class="ltx_text ltx_font_typewriter">Run Max Spin Ang</span> as described for <span class="ltx_text ltx_font_typewriter">Oxs_Exchange6Ngbr</span>.
</p>
</div>
<div id="Ch7.S3.I5.ix5.p3" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Example:</span> <span class="ltx_text ltx_font_typewriter">randexch.mif</span>.</p>
</div>
</dd>
</dl>
</div>
<div id="p5" class="ltx_para ltx_noindent">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:120%;">Self-Magnetostatic Energy
<br class="ltx_break"></span></p>
<dl id="Ch7.S3.I6" class="ltx_description">
<dt class="ltx_item"></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I6.p1" class="ltx_para">
<p class="ltx_p"><a name="PTDE" id="PTDE" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I6.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_Demag:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I6.ix1.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Standard demagnetization energy term, built upon
the assumption that the magnetization is constant in each cell.
It computes the average demagnetization field in each cell using
formulae from <cite class="ltx_cite ltx_citemacro_cite">[<a href="bibliography.html#bib2" title="Demagnetizing factors for rectangular ferromagnetic prisms" class="ltx_ref">2</a>, <a href="bibliography.html#bib16" title="A generalization of the demagnetizing tensor for nonuniform magnetization" class="ltx_ref">23</a>]</cite> and convolution
via the Fast Fourier Transform. This class supports non-periodic
simulations if the mesh object in the MIF file is of the
<a href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">Oxs_RectangularMesh</a>
type; for simulations periodic along one axis direction use the
<a href="html_oxsrectangularmesh.html#html:oxsperiodicrectangularmesh" title="item Oxs_RectangularMesh: ‣ 7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">Oxs_PeriodicRectangularMesh</a>
class. Periodicity in more than one direction is not supported at
this time. The specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_Demag:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      asymptotic_order </span><span class="ltx_text ltx_font_italic">error_order
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      demag_tensor_error </span><span class="ltx_text ltx_font_italic">relerror
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">The demag kernel is computed using a combination of analytic formulae
for near field terms, high-order asymptotic formulae for far field
terms, and summed subdivided cell asymptotic formulae for midrange
terms, where the offset <math id="Ch7.S3.I6.ix1.p1.m1" class="ltx_Math" alttext="R" display="inline"><mi>R</mi></math> between cell pairs determines the field
range (based on extensions of earlier work<cite class="ltx_cite ltx_citemacro_cite">[<a href="bibliography.html#bib13" title="Periodic boundary conditions for demagnetization interactions in micromagnetic simulations" class="ltx_ref">18</a>]</cite>).
The transition <math id="Ch7.S3.I6.ix1.p1.m2" class="ltx_Math" alttext="R" display="inline"><mi>R</mi></math> values are selected to give the best computation
speed while meeting the error requested by <span class="ltx_text ltx_font_italic">relerror</span>. The
demag kernel computation is a one-time operation performed during
problem initialization, so the kernel computation time is generally
of relatively minor concern, and accordingly the default value for
<span class="ltx_text ltx_font_italic">relerror</span> is 1e-15, i.e., nearly full double-precision
accuracy.</p>
</div>
<div id="Ch7.S3.I6.ix1.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">Asymptotic formulae are used to compute the demag kernel for larger
cell offset pair distances <math id="Ch7.S3.I6.ix1.p2.m1" class="ltx_Math" alttext="R" display="inline"><mi>R</mi></math>. By default an expansion with error
<math id="Ch7.S3.I6.ix1.p2.m2" class="ltx_Math" alttext="\mathcal{O}\left(1/R^{11}\right)" display="inline"><mrow><mi class="ltx_font_mathcaligraphic">𝒪</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><mn>1</mn><mo>/</mo><msup><mi>R</mi><mn>11</mn></msup></mrow><mo>)</mo></mrow></mrow></math> is used, but lower orders can be
requested through the <span class="ltx_text ltx_font_italic">error_order</span> option. Valid values for
<span class="ltx_text ltx_font_italic">error_order</span> are 5, 7, 9, and 11, where
<span class="ltx_text ltx_font_italic">error_order</span>=5 is the dipole approximation.</p>
</div>
<div id="Ch7.S3.I6.ix1.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">There is also backward support for the now deprecated option
<span class="ltx_text ltx_font_bold">asymptotic_radius</span>, which set the cutoff between the
analytic and asymptotic computation forms in units of cells. If
<span class="ltx_text ltx_font_bold">asymptotic_radius</span> is specified then it is converted to a
more-or-less equivalent value for <span class="ltx_text ltx_font_italic">relerror</span>, with
the special values of 0 and -1 mapping to <span class="ltx_text ltx_font_italic">relerror</span>=1 and
1e-16, respectively.</p>
</div>
<div id="Ch7.S3.I6.ix1.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">The example file <span class="ltx_text ltx_font_typewriter">demagtensor.mif</span> can be used to extract the
computed demagnetization tensor coefficients for a specified cell
geometry; see the description at the top of that file for usage
details.</p>
</div>
<div id="Ch7.S3.I6.ix1.p5" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">sample.mif</span>, <span class="ltx_text ltx_font_typewriter">cgtest.mif</span>, <span class="ltx_text ltx_font_typewriter">pbcbrick.mif</span>, <span class="ltx_text ltx_font_typewriter">demagtensor.mif</span>.</p>
</div>
<div id="Ch7.S3.I6.ix1.p6" class="ltx_para">
<p class="ltx_p"><a name="PTSD" id="PTSD" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I6.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_SimpleDemag:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I6.ix2.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">This is the same as the <span class="ltx_text ltx_font_typewriter">Oxs_Demag</span> object, except that
periodicity is not supported and asymptotic formulae are not used.
The implementation does not use any of the symmetries
inherent in the demagnetization kernel, or special properties of the
Fourier Transform when applied to a real (non-complex) function.
As a result, the source code is
considerably simpler than for <span class="ltx_text ltx_font_typewriter">Oxs_Demag</span>, but the run time
performance and memory usage are poorer. <span class="ltx_text ltx_font_typewriter">Oxs_SimpleDemag</span> is
included for validation checks, and as a base for user-defined
demagnetization implementations. The Specify initialization string
for <span class="ltx_text ltx_font_typewriter">Oxs_SimpleDemag</span> is an empty string, i.e., {}.</p>
</div>
<div id="Ch7.S3.I6.ix2.p2" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Example:</span> <span class="ltx_text ltx_font_typewriter">squarecubic.mif</span>.</p>
</div>
</dd>
</dl>
</div>
<div id="p6" class="ltx_para ltx_noindent">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:120%;">Zeeman Energy
<br class="ltx_break"></span></p>
<dl id="Ch7.S3.I7" class="ltx_description">
<dt class="ltx_item"></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.p1" class="ltx_para">
<p class="ltx_p"><a name="PTUZ" id="PTUZ" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="html:UZeeman" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_UZeeman:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.ix1.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Uniform (homogeneous) applied field energy. This class is frequently
used for simulating hysteresis loops. The specify block takes an
optional <span class="ltx_text ltx_font_bold">multiplier</span> entry, and a required field range list
<span class="ltx_text ltx_font_bold">Hrange</span>. The field range list should be a compound list,
with each sublist consisting of 7 elements: the first 3 denote the
<math id="Ch7.S3.I7.ix1.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>, <math id="Ch7.S3.I7.ix1.p1.m2" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math>, and <math id="Ch7.S3.I7.ix1.p1.m3" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> components of the start field for the range, the
next 3 denote the <math id="Ch7.S3.I7.ix1.p1.m4" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>, <math id="Ch7.S3.I7.ix1.p1.m5" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math>, and <math id="Ch7.S3.I7.ix1.p1.m6" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> components of the end field for
the range, and the last element specifies the number of (linear) steps
through the range. If the step count is 0, then the range consists
of the start field only. If the step count is bigger than 0, then
the start field is skipped over if and only if it is the same field
that ended the previous range (if any).</p>
</div>
<div id="Ch7.S3.I7.ix1.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The fields specified in the range entry are nominally in A/m, but
these values are multiplied by <span class="ltx_text ltx_font_typewriter">multiplier</span>, which may be used to
effectively change the units. For example,</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_UZeeman </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      multiplier 795.77472
<br class="ltx_break">
      Hrange </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            </span>{<span class="ltx_text ltx_font_typewriter"> 0 0 0 10 0 0 2 </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
            </span>{<span class="ltx_text ltx_font_typewriter"> 10 0 0 0 0 0 1 </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">The applied field steps between 0 mT, 5 mT, 10 mT and back to 0 mT,
for four stages in total. If the first field in the second range
sublist was different from the second field in the first range
sublist, then a step would have been added between those field
values, so five stages would have resulted. In this example, note
that 795.77472=0.001/<math id="Ch7.S3.I7.ix1.p2.m1" class="ltx_Math" alttext="\mu_{0}" display="inline"><msub><mi>μ</mi><mn>0</mn></msub></math>.</p>
</div>
<div id="Ch7.S3.I7.ix1.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs, the
<span class="ltx_text ltx_font_typewriter">Oxs_UZeeman</span> class provides these four scalar outputs:</p>
<ul id="Ch7.S3.I7.ix1.I1" class="ltx_itemize">
<li id="Ch7.S3.I7.ix1.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix1.I0.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">B:</span> Magnitude of the applied field, in
mT. This is a non-negative quantity.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix1.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix1.I0.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bx:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix1.I0.i2.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>-component
of the applied field, in mT.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix1.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix1.I0.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">By:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix1.I0.i3.p1.m1" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math>-component
of the applied field, in mT.
</p>
</div>
</li>
<li id="Ch7.S3.I7.ix1.I0.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix1.I0.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bz:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix1.I0.i4.p1.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math>-component
of the applied field, in mT.</p>
</div>
</li>
</ul>
</div>
<div id="Ch7.S3.I7.ix1.p4" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">sample.mif</span>, <span class="ltx_text ltx_font_typewriter">cgtest.mif</span>, <span class="ltx_text ltx_font_typewriter">marble.mif</span>.</p>
</div>
<div id="Ch7.S3.I7.ix1.p5" class="ltx_para">
<p class="ltx_p"><a name="PTFZ" id="PTFZ" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I7.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_FixedZeeman:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.ix2.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Non-uniform, non-time varying applied field.
This can be used to simulate a biasing field. The specify block
takes one required parameter, which defines the field, and one
optional parameter, which specifies a multiplication factor.</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_FixedZeeman:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      field </span><span class="ltx_text ltx_font_italic">vector_field_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      multiplier </span><span class="ltx_text ltx_font_italic">multiplier
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">The default value for <span class="ltx_text ltx_font_italic">multiplier</span> is 1. The field units,
after scaling by <span class="ltx_text ltx_font_italic">multiplier</span>, should be A/m.</p>
</div>
<div id="Ch7.S3.I7.ix2.p2" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">spinvalve.mif</span>, <span class="ltx_text ltx_font_typewriter">spinvalve-af.mif</span>, <span class="ltx_text ltx_font_typewriter">yoyo.mif</span>.</p>
</div>
<div id="Ch7.S3.I7.ix2.p3" class="ltx_para">
<p class="ltx_p"><a name="PTSU" id="PTSU" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I7.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_ScriptUZeeman:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.ix3.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Spatially uniform applied field,
potentially varying as a function of time and stage, determined by a
Tcl script. The Specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_ScriptUZeeman:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      script_args </span>{<span class="ltx_text ltx_font_italic"> args_request </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      script </span><span class="ltx_text ltx_font_italic">Tcl_script
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      multiplier </span><span class="ltx_text ltx_font_italic">multiplier
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      stage_count </span><span class="ltx_text ltx_font_italic">number_of_stages</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
</span>}</p>
</blockquote>
<p class="ltx_p">Here <span class="ltx_text ltx_font_bold">script</span> indicates the Tcl script to use. The script
is called once each iteration. Appended to the script are the
arguments requested by <span class="ltx_text ltx_font_bold">script_args</span>, in the manner
explained in the <a href="par_groupedLists.html" title="17.3.3 Specify Conventions ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref">User Defined Support Procedures</a>
 of the MIF 2 file format documentation. The value
<span class="ltx_text ltx_font_italic">args_request</span> should be a subset of {<span class="ltx_text ltx_font_typewriter">stage
stage_time total_time base_state_id current_state_id</span>}.
The units for the time options are seconds. The two
<span class="ltx_text ltx_font_typewriter">state_id</span> options are intended for use with the
MIF <a href="sec_mif2ExtensionCommands.html#html:GetStateData" title="item GetStateData ‣ 17.3.2 MIF 2.1 Extension Commands ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">GetStateData</a> command;
refer to the documentation on that command in the MIF 2.1 section
for details. If <span class="ltx_text ltx_font_typewriter">script_args</span> is not specified, the default
argument list is {<span class="ltx_text ltx_font_typewriter">stage stage_time total_time</span>}.</p>
</div>
<div id="Ch7.S3.I7.ix3.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The return value from the script should be a 6-tuple of numbers,
{<span class="ltx_text ltx_font_typewriter">Hx</span>, <span class="ltx_text ltx_font_typewriter">Hy</span>, <span class="ltx_text ltx_font_typewriter">Hz</span>, <span class="ltx_text ltx_font_typewriter">dHx</span>, <span class="ltx_text ltx_font_typewriter">dHy</span>, <span class="ltx_text ltx_font_typewriter">dHz</span>},
representing the applied field and the time derivative of the applied
field. The field as a function of time must be differentiable for
the duration of each stage. Discontinuities are permitted between
stages. If a time evolver is being used, then it is very important
that the time derivative values are correct; otherwise the evolver
will not function properly. This usual symptom of this problem is a
collapse in the time evolution step size.</p>
</div>
<div id="Ch7.S3.I7.ix3.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">The field and its time derivative are multiplied by the
<span class="ltx_text ltx_font_bold">multiplier</span> value before use. The final field value should
be in A/m; if the Tcl script returns the field in T, then a
<span class="ltx_text ltx_font_typewriter">multiplier</span> value of 1/<math id="Ch7.S3.I7.ix3.p3.m1" class="ltx_Math" alttext="\mu_{0}" display="inline"><msub><mi>μ</mi><mn>0</mn></msub></math> (approx. 795774.72) should be
applied to convert the Tcl result into A/m. The default value for
<span class="ltx_text ltx_font_typewriter">multiplier</span> is 1.</p>
</div>
<div id="Ch7.S3.I7.ix3.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">stage_count</span> parameter informs the
<a href="sec_oxsDrivers.html" title="7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">Oxs_Driver</a> as to how many stages the
<span class="ltx_text ltx_font_typewriter">Oxs_ScriptUZeeman</span> object wants. A value of 0 (the default)
indicates that the object is prepared for any range of stages. The
<span class="ltx_text ltx_font_typewriter">stage_count</span> value given here must be compatible with the
<a href="sec_oxsDrivers.html#PToxsdriverstagecount" title="The ‣ item Oxs_TimeDriver: ‣ 7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_font_typewriter">stage_count</span> setting in the driver Specify
block</a>.</p>
</div>
<div id="Ch7.S3.I7.ix3.p5" class="ltx_para ltx_align_left">
<p class="ltx_p">The following example produces a sinusoidally varying field of
frequency 1 GHz and amplitude 800 A/m, directed along the <math id="Ch7.S3.I7.ix3.p5.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>-axis.
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
proc SineField { total_time } {
    set PI [expr {4*atan(1.)}]
    set Amp 800.0
    set Freq [expr {1e9*(2*$PI)}]
    set Hx [expr {$Amp*sin($Freq*$total_time)}]
    set dHx [expr {$Amp*$Freq*cos($Freq*$total_time)}]
    return [list $Hx 0 0 $dHx 0 0]
}

Specify Oxs_ScriptUZeeman {
   script_args total_time
   script SineField
}
</pre>
</blockquote>
</div>
<div id="Ch7.S3.I7.ix3.p6" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs, the
<span class="ltx_text ltx_font_typewriter">Oxs_ScriptUZeeman</span> class provides these four scalar outputs:</p>
<ul id="Ch7.S3.I7.ix3.I1" class="ltx_itemize">
<li id="Ch7.S3.I7.ix3.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix3.I0.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">B:</span> Magnitude of the applied field, in
mT. This is a non-negative quantity.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix3.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix3.I0.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bx:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix3.I0.i2.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>-component
of the applied field, in mT.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix3.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix3.I0.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">By:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix3.I0.i3.p1.m1" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math>-component
of the applied field, in mT.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix3.I0.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix3.I0.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bz:</span> Signed amplitude of the <math id="Ch7.S3.I7.ix3.I0.i4.p1.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math>-component
of the applied field, in mT.</p>
</div>
</li>
</ul>
</div>
<div id="Ch7.S3.I7.ix3.p7" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">acsample.mif</span>, <span class="ltx_text ltx_font_typewriter">pulse.mif</span>, <span class="ltx_text ltx_font_typewriter">rotate.mif</span>,
<span class="ltx_text ltx_font_typewriter">varalpha.mif</span>, <span class="ltx_text ltx_font_typewriter">yoyo.mif</span>.</p>
</div>
<div id="Ch7.S3.I7.ix3.p8" class="ltx_para">
<p class="ltx_p"><a name="PTTZ" id="PTTZ" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I7.ix4" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_TransformZeeman:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.ix4.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">Essentially a combination of the <span class="ltx_text ltx_font_typewriter">Oxs_FixedZeeman</span> and
<span class="ltx_text ltx_font_typewriter">Oxs_ScriptUZeeman</span> classes, where an applied field is produced
by applying a spatially uniform, but time and stage varying linear
transform to a spatially varying but temporally static field. The
transform is specified by a Tcl script.</p>
</div>
<div id="Ch7.S3.I7.ix4.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The Specify block has the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_TransformZeeman:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      field </span><span class="ltx_text ltx_font_italic">vector_field_spec
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      type </span><span class="ltx_text ltx_font_italic">transform_type
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      script </span><span class="ltx_text ltx_font_italic">Tcl_script
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      script_args </span>{<span class="ltx_text ltx_font_italic"> args_request </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      multiplier </span><span class="ltx_text ltx_font_italic">multiplier
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      stage_count </span><span class="ltx_text ltx_font_italic">number_of_stages</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
</span>}</p>
</blockquote>
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">field</span> specified by <span class="ltx_text ltx_font_italic">vector_field_spec</span> is
evaluated during problem initialization and held throughout the life
of the problem. On each iteration, the specified Tcl <span class="ltx_text ltx_font_bold">script</span> is called once. Appended to the script are the
arguments requested by <span class="ltx_text ltx_font_bold">script_args</span>, as explained in the
<a href="par_groupedLists.html" title="17.3.3 Specify Conventions ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref">User Defined Support Procedures</a> of the
MIF 2 file format documentation. The value for <span class="ltx_text ltx_font_typewriter">script_args</span>
should be a subset of {<span class="ltx_text ltx_font_typewriter">stage stage_time total_time</span>}.
The default value for <span class="ltx_text ltx_font_typewriter">script_args</span> is the complete list in the
aforementioned order. The time arguments are specified in seconds.</p>
</div>
<div id="Ch7.S3.I7.ix4.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">The script return value should define a 3x3 linear transform and its
time derivative. The transform must be differentiable with respect
to time throughout each stage, but is allowed to be discontinuous
between stages. As noted in the <span class="ltx_text ltx_font_typewriter">Oxs_ScriptUZeeman</span>
documentation, it is important that the derivative information be
correct. The transform is applied pointwise to the fixed
field obtained from <span class="ltx_text ltx_font_italic">vector_field_spec</span>, which is
additionally scaled by <span class="ltx_text ltx_font_italic">multiplier</span>. The
<span class="ltx_text ltx_font_bold">multiplier</span> entry is optional, with default value 1.0.</p>
</div>
<div id="Ch7.S3.I7.ix4.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">type</span> <span class="ltx_text ltx_font_italic">transform_type</span> value declares the
format of the result returned from the Tcl script. Recognized
formats are <span class="ltx_text ltx_font_typewriter">identity</span>, <span class="ltx_text ltx_font_typewriter">diagonal</span>, <span class="ltx_text ltx_font_typewriter">symmetric</span> and
<span class="ltx_text ltx_font_typewriter">general</span>. The most flexible is <span class="ltx_text ltx_font_typewriter">general</span>, which indicates
that the return from the Tcl script is a list of 18 numbers,
defining a general 3x3 matrix and its 3x3 matrix of time derivatives.
The matrices are specified in row-major order, i.e., <math id="Ch7.S3.I7.ix4.p4.m1" class="ltx_Math" alttext="M_{1,1}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></math>,
<math id="Ch7.S3.I7.ix4.p4.m2" class="ltx_Math" alttext="M_{1,2}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m3" class="ltx_Math" alttext="M_{1,3}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m4" class="ltx_Math" alttext="M_{2,1}" display="inline"><msub><mi>M</mi><mrow><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m5" class="ltx_Math" alttext="M_{2,2}" display="inline"><msub><mi>M</mi><mrow><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></math>, …. Of course, this
is a long list to construct; if the desired transform is symmetric or
diagonal, then the <span class="ltx_text ltx_font_typewriter">type</span> may be set accordingly to reduce the
size of the Tcl result string. Scripts of the <span class="ltx_text ltx_font_typewriter">symmetric</span> type
return 12 numbers, the 6 upper diagonal entries in row-major order,
i.e., <math id="Ch7.S3.I7.ix4.p4.m6" class="ltx_Math" alttext="M_{1,1}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m7" class="ltx_Math" alttext="M_{1,2}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m8" class="ltx_Math" alttext="M_{1,3}" display="inline"><msub><mi>M</mi><mrow><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m9" class="ltx_Math" alttext="M_{2,2}" display="inline"><msub><mi>M</mi><mrow><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></math>, <math id="Ch7.S3.I7.ix4.p4.m10" class="ltx_Math" alttext="M_{2,3}" display="inline"><msub><mi>M</mi><mrow><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub></math>,
<math id="Ch7.S3.I7.ix4.p4.m11" class="ltx_Math" alttext="M_{3,3}" display="inline"><msub><mi>M</mi><mrow><mn>3</mn><mo>,</mo><mn>3</mn></mrow></msub></math>, for both the transformation matrix and its time
derivative. Use the <span class="ltx_text ltx_font_typewriter">diagonal</span> type for diagonal matrices, in
which case the Tcl script result should be a list of 6 numbers.</p>
</div>
<div id="Ch7.S3.I7.ix4.p5" class="ltx_para ltx_align_left">
<p class="ltx_p">The simplest <span class="ltx_text ltx_font_italic">transform_type</span> is <span class="ltx_text ltx_font_typewriter">identity</span>, which is the
default. This identifies the transform as the identity matrix, which
means that effectively no transform is applied, aside from the
<span class="ltx_text ltx_font_typewriter">multiplier</span> option which is still active. For the <span class="ltx_text ltx_font_typewriter">identity</span>
transform type, <span class="ltx_text ltx_font_typewriter">script</span> and <span class="ltx_text ltx_font_typewriter">script_args</span> should not be
specified, and <span class="ltx_text ltx_font_typewriter">Oxs_TransformZeeman</span> becomes a clone of the
<span class="ltx_text ltx_font_typewriter">Oxs_FixedZeeman</span> class.</p>
</div>
<div id="Ch7.S3.I7.ix4.p6" class="ltx_para ltx_align_left">
<p class="ltx_p">The following example produces a 1000 A/m field that rotates in the
<math id="Ch7.S3.I7.ix4.p6.m1" class="ltx_Math" alttext="xy" display="inline"><mrow><mi>x</mi><mo>⁢</mo><mi>y</mi></mrow></math>-plane at a frequency of 1 GHz:
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
proc Rotate { freq stage stagetime totaltime } {
   global PI
   set w [expr {$freq*2*$PI}]
   set ct [expr {cos($w*$totaltime)}]
   set mct [expr {-1*$ct}]      ;# "mct" is "minus cosine (w)t"
   set st [expr {sin($w*$totaltime)}]
   set mst [expr {-1*$st}]      ;# "mst" is "minus sine (w)t"
   return [list  $ct $mst  0 \
                 $st $ct   0 \
                   0   0   1 \
                 [expr {$w*$mst}] [expr {$w*$mct}] 0 \
                 [expr {$w*$ct}]  [expr {$w*$mst}] 0 \
                        0                0         0]
}

Specify Oxs_TransformZeeman {
  type general
  script {Rotate 1e9}
  field {0 1000. 0}
}
</pre>
</blockquote>
<p class="ltx_p">This particular effect could be obtained using the
<span class="ltx_text ltx_font_typewriter">Oxs_ScriptUZeeman</span> class, because the <span class="ltx_text ltx_font_typewriter">field</span> is uniform.
But the field was taken uniform only to simplify the example. The
<span class="ltx_text ltx_font_italic">vector_field_spec</span> may be any <a href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref">Oxs vector field
object</a>. For
example, the base field could be large in the center of the sample, and
decay towards the edges. In that case, the above example would generate
an applied rotating field that is concentrated in the center of the
sample.</p>
</div>
<div id="Ch7.S3.I7.ix4.p7" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">stage_count</span> parameter informs the
<a href="sec_oxsDrivers.html" title="7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">Oxs_Driver</a> as to how many stages the
<span class="ltx_text ltx_font_typewriter">Oxs_TransformZeeman</span> object wants. A value of 0 (the default)
indicates that the object is prepared for any range of stages. The
<span class="ltx_text ltx_font_typewriter">stage_count</span> value given here must be compatible with the
<a href="sec_oxsDrivers.html#PToxsdriverstagecount" title="The ‣ item Oxs_TimeDriver: ‣ 7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_font_typewriter">stage_count</span> setting in the driver Specify
block</a>.</p>
</div>
<div id="Ch7.S3.I7.ix4.p8" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">sample2.mif</span>, <span class="ltx_text ltx_font_typewriter">tickle.mif</span>, <span class="ltx_text ltx_font_typewriter">rotatecenter.mif</span>.</p>
</div>
<div id="Ch7.S3.I7.ix4.p9" class="ltx_para">
<p class="ltx_p"><a name="PTSZ" id="PTSZ" class="ltx_anchor"></a></p>
</div>
</dd>
<dt id="Ch7.S3.I7.ix5" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">Oxs_StageZeeman:</span></span></dt>
<dd class="ltx_item">
<div id="Ch7.S3.I7.ix5.p1" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> class provides spatially varying applied
fields that are updated once per stage. In its general form, the
field at each stage is provided by an <a href="sec_oxsFieldObjects.html" title="7.3.6 Field Objects ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref">Oxs vector field
object</a>
determined by a user supplied Tcl script. There is also a
simplified interface that accepts a list of <a href="sec_vfformats.html" title="Chapter 19 Vector Field File Format (OVF) ‣ OOMMF User’s Guide" class="ltx_ref">vector
field files</a>, one per
stage, that are used to specify the applied field.</p>
</div>
<div id="Ch7.S3.I7.ix5.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">The Specify block takes the form</p>
<blockquote class="ltx_quote">
<p class="ltx_p"><span class="ltx_text ltx_font_typewriter">Specify Oxs_StageZeeman:</span><span class="ltx_text ltx_font_italic">name</span><span class="ltx_text ltx_font_typewriter"> </span>{
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      script </span><span class="ltx_text ltx_font_italic">Tcl_script
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
      files </span>{<span class="ltx_text ltx_font_italic"> list_of_files </span>}
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter">
      stage_count </span><span class="ltx_text ltx_font_italic">number_of_stages</span><span class="ltx_text ltx_font_typewriter"> 
<br class="ltx_break">
      multiplier </span><span class="ltx_text ltx_font_italic">multiplier
<br class="ltx_break"></span><span class="ltx_text ltx_font_typewriter">
</span>}</p>
</blockquote>
<p class="ltx_p">The initialization string should specify either <span class="ltx_text ltx_font_typewriter">script</span> or
<span class="ltx_text ltx_font_typewriter">files</span>, but not both. If a <span class="ltx_text ltx_font_bold">script</span> is specified,
then each time a new stage is started in the simulation, a Tcl command is formed by appending to <span class="ltx_text ltx_font_italic">Tcl_script</span> the 0-based
integer stage number. This command should return a reference to an
<span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span> object, as either the instance name of an
object defined via a top-level Specify block elsewhere in the
MIF file, or as a two item list consisting of the name of an
<span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span> class and an appropriate initialization string.
In the latter case the <span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span> object will be created
as a temporary object via an inlined Specify call.</p>
</div>
<div id="Ch7.S3.I7.ix5.p3" class="ltx_para ltx_align_left">
<p class="ltx_p">The following example should help clarify the use of the <span class="ltx_text ltx_font_typewriter">script</span>
parameter.
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
proc SlidingField { xcutoff xrel yrel zrel } {
   if {$xrel&gt;$xcutoff} { return [list 0. 0. 0.] }
   return [list 2e4 0. 0.]
}

proc SlidingFieldSpec { stage } {
  set xcutoff [expr {double($stage)/10.}]
  set spec Oxs_ScriptVectorField
  lappend spec [subst {
      atlas :atlas
      script {SlidingField $xcutoff}
   }]
   return $spec
}

Specify Oxs_StageZeeman {
  script SlidingFieldSpec
  stage_count 11
}
</pre>
</blockquote>
</div>
<div id="Ch7.S3.I7.ix5.p4" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_typewriter">SlidingFieldSpec</span> proc is used to generate the initialization
string for an <span class="ltx_text ltx_font_typewriter">Oxs_ScriptVectorField</span> vector field object, which
in turn uses the <span class="ltx_text ltx_font_typewriter">SlidingField</span> proc to specify the applied field
on a position-by-position basis. The resulting field will be
<math id="Ch7.S3.I7.ix5.p4.m1" class="ltx_Math" alttext="2\times 10^{4}" display="inline"><mrow><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>4</mn></msup></mrow></math> A/m in the positive x-direction at
all points with relative x-coordinate larger than <span class="ltx_text ltx_font_typewriter">$stage/10.</span>,
and 0 otherwise. <span class="ltx_text ltx_font_typewriter">$stage</span> is the stage index, which here is
one of 0, 1, …, 10. For example, if <span class="ltx_text ltx_font_typewriter">$stage</span> is 5, then the
left half of the sample will see a <math id="Ch7.S3.I7.ix5.p4.m2" class="ltx_Math" alttext="2\times 10^{4}" display="inline"><mrow><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>4</mn></msup></mrow></math>
A/m field directed to the right, and the right half of the sample
will see none. The return value from <span class="ltx_text ltx_font_typewriter">SlidingFieldSpec</span> in this
case will be
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
Oxs_ScriptVectorField {
   atlas :atlas
   script {SlidingField 0.5}
}
</pre>
</blockquote>
<p class="ltx_p">The <code class="ltx_verbatim ltx_font_typewriter">:atlas</code> reference is to an <span class="ltx_text ltx_font_typewriter">Oxs_Atlas</span> object defined
elsewhere in the MIF file.</p>
</div>
<div id="Ch7.S3.I7.ix5.p5" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_bold">stage_count</span> parameter lets the
<a href="sec_oxsDrivers.html" title="7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_typewriter">Oxs_Driver</a> know how many stages the
<span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> object wants. A value of 0 indicates that the
object is prepared for any range of stages. Zero is the default
value for <span class="ltx_text ltx_font_typewriter">stage_count</span> when using the <span class="ltx_text ltx_font_italic">Tcl_script</span>
interface. The <span class="ltx_text ltx_font_typewriter">stage_count</span> value given here must be compatible
with the <a href="sec_oxsDrivers.html#PToxsdriverstagecount" title="The ‣ item Oxs_TimeDriver: ‣ 7.3.5 Drivers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_font_typewriter">stage_count</span> setting in the driver
Specify block</a>.</p>
</div>
<div id="Ch7.S3.I7.ix5.p6" class="ltx_para ltx_align_left">
<p class="ltx_p">The example above made use of two scripts, one to specify the
<span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span> object, and one used internally by the
<span class="ltx_text ltx_font_typewriter">Oxs_ScriptVectorField</span> object. But any <span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span>
class may be used, as in the next example.
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
proc FileField { stage } {
  set filelist { field-a.ohf field-b.ohf field-c.ohf }
  set spec Oxs_FileVectorField
  lappend spec [subst {
      atlas :atlas
      file [lindex $filelist $stage]
   }]
   return $spec
}

Specify Oxs_StageZeeman {
  script FileField
  stage_count 3
}
</pre>
</blockquote>
<p class="ltx_p">The <span class="ltx_text ltx_font_typewriter">FileField</span> proc yields a specification for an
<span class="ltx_text ltx_font_typewriter">Oxs_FileVectorField</span> object that loads one of three files,
<span class="ltx_text ltx_font_typewriter">field-a.ohf</span>, <span class="ltx_text ltx_font_typewriter">field-b.ohf</span>, or <span class="ltx_text ltx_font_typewriter">field-c.ohf</span>, depending on
the stage number.</p>
</div>
<div id="Ch7.S3.I7.ix5.p7" class="ltx_para ltx_align_left">
<p class="ltx_p">Specifying applied fields from a sequence of files is common enough
to warrant a simplified interface. This is the purpose of the
<span class="ltx_text ltx_font_bold">files</span> parameter:
</p>
<blockquote class="ltx_quote">
<pre class="ltx_verbatim ltx_font_typewriter">
Specify Oxs_StageZeeman {
  files { field-a.ohf field-b.ohf field-c.ohf }
}
</pre>
</blockquote>
<p class="ltx_p">This is essentially equivalent to the preceding example, with two
differences. First, <span class="ltx_text ltx_font_typewriter">stage_count</span> is not needed because
<span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> knows the length of the list of files. You may
specify <span class="ltx_text ltx_font_typewriter">stage_count</span>, but the default value is the length of the
<span class="ltx_text ltx_font_typewriter">files</span> list. This is in contrast to the default value
of 0 when using the <span class="ltx_text ltx_font_typewriter">script</span> interface. If <span class="ltx_text ltx_font_typewriter">stage_count</span> is
set larger than the file list, then the last file is repeated as
necessary to reach the specified size.</p>
</div>
<div id="Ch7.S3.I7.ix5.p8" class="ltx_para ltx_align_left">
<p class="ltx_p">The second difference is that no <span class="ltx_text ltx_font_typewriter">Oxs_Atlas</span> is specified when
using the <span class="ltx_text ltx_font_typewriter">files</span> interface. The <span class="ltx_text ltx_font_typewriter">Oxs_FileVectorField</span> object
spatially scales the field read from the file to match a specified
volume. Typically a volume is specified by explicit reference to an
atlas, but with the <span class="ltx_text ltx_font_typewriter">files</span> interface to <span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> the
file fields are implicitly scaled to match the whole of the meshed
simulation volume. This is the most common case; to obtain a
different spatial scaling use the <span class="ltx_text ltx_font_typewriter">script</span> interface as
illustrated above with a different atlas or an explicit x/y/z-range
specification.</p>
</div>
<div id="Ch7.S3.I7.ix5.p9" class="ltx_para ltx_align_left">
<p class="ltx_p">The <span class="ltx_text ltx_font_italic">list_of_files</span> value is interpreted as a
<a href="par_groupedLists.html" title="17.3.3 Specify Conventions ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref ltx_font_italic">grouped list</a>. See
the notes in Sec. <a href="par_groupedLists.html" title="17.3.3 Specify Conventions ‣ 17.3 MIF 2.1 ‣ Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_tag">17.3.3</span></a> for details on grouped
lists.</p>
</div>
<div id="Ch7.S3.I7.ix5.p10" class="ltx_para ltx_align_left">
<p class="ltx_p">The remaining <span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> parameter is
<span class="ltx_text ltx_font_bold">multiplier</span>. The value of this parameter is applied as a
scale factor to the field magnitude on a point-by-point basis. For
example, if the field returned by the <span class="ltx_text ltx_font_typewriter">Oxs_VectorField</span> object
were in Oe, instead of the required A/m, then <span class="ltx_text ltx_font_typewriter">multiplier</span> could
be set to 79.5775 to perform the conversion. The direction of the
applied field can be reversed by supplying a negative <span class="ltx_text ltx_font_typewriter">multiplier</span>
value.</p>
</div>
<div id="Ch7.S3.I7.ix5.p11" class="ltx_para ltx_align_left">
<p class="ltx_p">In addition to the standard energy and field outputs, the
<span class="ltx_text ltx_font_typewriter">Oxs_StageZeeman</span> class provides these four scalar outputs:</p>
<ul id="Ch7.S3.I7.ix5.I1" class="ltx_itemize">
<li id="Ch7.S3.I7.ix5.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix5.I0.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">B max:</span> Pointwise maximum magnitude of the applied
field, in mT. This is a non-negative quantity;

<math id="Ch7.S3.I7.ix5.I0.i1.p1.m1" class="ltx_Math" alttext="\textrm{B max}=\sqrt{(\textrm{Bx max})^{2}+(\textrm{By max})^{2}+(\textrm{Bz %
max})^{2}}." display="inline"><mrow><mrow><mtext>B max</mtext><mo>=</mo><msqrt><mrow><msup><mrow><mo stretchy="false">(</mo><mtext>Bx max</mtext><mo stretchy="false">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="false">(</mo><mtext>By max</mtext><mo stretchy="false">)</mo></mrow><mn>2</mn></msup><mo>+</mo><msup><mrow><mo stretchy="false">(</mo><mtext>Bz max</mtext><mo stretchy="false">)</mo></mrow><mn>2</mn></msup></mrow></msqrt></mrow><mo>.</mo></mrow></math>
</p>
</div>
</li>
<li id="Ch7.S3.I7.ix5.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix5.I0.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bx max:</span> Signed value of the <math id="Ch7.S3.I7.ix5.I0.i2.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>-component of the applied
field at the point of maximum applied field magnitude, in mT.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix5.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix5.I0.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">By max:</span> Signed value of the <math id="Ch7.S3.I7.ix5.I0.i3.p1.m1" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math>-component of the applied
field at the point of maximum applied field magnitude, in mT.</p>
</div>
</li>
<li id="Ch7.S3.I7.ix5.I0.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">•</span></span> 
<div id="Ch7.S3.I7.ix5.I0.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Bz max:</span> Signed value of the <math id="Ch7.S3.I7.ix5.I0.i4.p1.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math>-component of the applied
field at the point of maximum applied field magnitude, in mT.</p>
</div>
</li>
</ul>
</div>
<div id="Ch7.S3.I7.ix5.p12" class="ltx_para ltx_align_left">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Examples:</span> <span class="ltx_text ltx_font_typewriter">sliding.mif</span>, <span class="ltx_text ltx_font_typewriter">slidingproc.mif</span>, <span class="ltx_text ltx_font_typewriter">rotatestage.mif</span>,
<span class="ltx_text ltx_font_typewriter">rotatecenterstage.mif</span>.</p>
</div>
</dd>
</dl>
</div>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="html_oxsrectangularmesh.html" title="7.3.2 Meshes ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.2 </span>Meshes</span></a><a href="sec_oxsEvolvers.html" title="7.3.4 Evolvers ‣ 7.3 Standard Oxs_Ext Child Classes ‣ Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3.4 </span>Evolvers</span></a><a href="index.html" title="Index ‣ OOMMF User’s Guide" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a>
</div></footer>
</div>
</body>
</html>
