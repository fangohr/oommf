<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>2.3.4 Parallelization‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide</title>
<!--Generated by LaTeXML (version 0.8.6) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on September 30, 2022.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="oommf.css" type="text/css">
<link rel="stylesheet" href="oommf-report.css" type="text/css">
<link rel="stylesheet" href="oommf-tweakfonts.css" type="text/css">
<link rel="stylesheet" href="oommf-navbar.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="sec_install.advanced.html" title="2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="up up" href="sec_install.html" title="Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="up up up" href="userguide.html" title="OOMMF User’s Guide">
<link rel="start" href="userguide.html" title="OOMMF User’s Guide">
<link rel="prev" href="sec_install.optimize.html" title="2.3.3 Optimization ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="next" href="sec_install.platformnames.html" title="2.3.5 Managing OOMMF Platform Names ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_install.reducedisk.html" title="2.3.1 Reducing Disk Space Usage ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_install.custom.html" title="2.3.2 Local Customizations ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_install.optimize.html" title="2.3.3 Optimization ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="subsection" href="sec_install.platformnames.html" title="2.3.5 Managing OOMMF Platform Names ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="section" href="sec_install.requirements.html" title="2.1 Requirements ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="section" href="sec_install.basic.html" title="2.2 Basic Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="section" href="sec_install.advanced.html" title="2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="section" href="sec_install.platformissues.html" title="2.4 Platform Specific Installation Issues ‣ Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="chapter" href="disclaimer.html" title="Disclaimer ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_overview.html" title="Chapter 1 Overview of OOMMF ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_install.html" title="Chapter 2 Installation ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_quickstart.html" title="Chapter 3 Quick Start: Example OOMMF Session ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_arch.html" title="Chapter 4 OOMMF Architecture Overview ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_cll.html" title="Chapter 5 Command Line Launching ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmlaunch.html" title="Chapter 6 OOMMF Launcher/Control Interface: mmLaunch ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmprobed.html" title="Chapter 8 Micromagnetic Problem Editor: mmProbEd ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_filesource.html" title="Chapter 9 Micromagnetic Problem File Source: FileSource ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmsolve.html" title="Chapter 10 The 2D Micromagnetic Solver ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmdatatable.html" title="Chapter 11 Data Table Display: mmDataTable ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmgraph.html" title="Chapter 12 Data Graph Display: mmGraph ‣ OOMMF User’s Guide">
<link rel="chapter" href="html_mmdispdatascale.html" title="Chapter 13 Vector Field Display: mmDisp ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmarchive.html" title="Chapter 14 Data Archive: mmArchive ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mmhelp.html" title="Chapter 15 Documentation Viewer: mmHelp ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_cmdutils.html" title="Chapter 16 Command Line Utilities ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_mifformat.html" title="Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_odtformat.html" title="Chapter 18 Data Table File Format (ODT) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_vfformats.html" title="Chapter 19 Vector Field File Format (OVF) ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_trouble.html" title="Chapter 20 Troubleshooting ‣ OOMMF User’s Guide">
<link rel="chapter" href="sec_credits.html" title="Chapter 21 Credits ‣ OOMMF User’s Guide">
<link rel="bibliography" href="bibliography.html" title="Bibliography ‣ OOMMF User’s Guide">
<link rel="index" href="index.html" title="Index ‣ OOMMF User’s Guide">
<meta name="keywords" lang="en" content="NUMA, OOMMF_NUMANODES, environment variables, parallelization">
</head>
<body>
<nav class="ltx_page_navbar"><a href="userguide.html" title="OOMMF User’s Guide" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">OOMMF User’s Guide</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="disclaimer.html" title="Disclaimer ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Disclaimer</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_overview.html" title="Chapter 1 Overview of OOMMF ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Overview of OOMMF</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter">
<a href="sec_install.html" title="Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Installation</span></a>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section"><a href="sec_install.requirements.html" title="2.1 Requirements ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Requirements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="sec_install.basic.html" title="2.2 Basic Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Basic Installation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="sec_install.advanced.html" title="2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Advanced Installation</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_install.reducedisk.html" title="2.3.1 Reducing Disk Space Usage ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.1 </span>Reducing Disk Space Usage</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_install.custom.html" title="2.3.2 Local Customizations ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.2 </span>Local Customizations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_install.optimize.html" title="2.3.3 Optimization ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.3 </span>Optimization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection ltx_ref_self"><span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.4 </span>Parallelization</span></span></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="sec_install.platformnames.html" title="2.3.5 Managing OOMMF Platform Names ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.5 </span>Managing OOMMF Platform Names</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="sec_install.platformissues.html" title="2.4 Platform Specific Installation Issues ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.4 </span>Platform Specific Installation Issues</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_quickstart.html" title="Chapter 3 Quick Start: Example OOMMF Session ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Quick Start: Example OOMMF Session</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_arch.html" title="Chapter 4 OOMMF Architecture Overview ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>OOMMF Architecture Overview</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_cll.html" title="Chapter 5 Command Line Launching ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Command Line Launching</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmlaunch.html" title="Chapter 6 OOMMF Launcher/Control Interface: mmLaunch ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>OOMMF Launcher/Control Interface: mmLaunch</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>OOMMF eXtensible Solver</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmprobed.html" title="Chapter 8 Micromagnetic Problem Editor: mmProbEd ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Micromagnetic Problem Editor: mmProbEd</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_filesource.html" title="Chapter 9 Micromagnetic Problem File Source: FileSource ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Micromagnetic Problem File Source: FileSource</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmsolve.html" title="Chapter 10 The 2D Micromagnetic Solver ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>The 2D Micromagnetic Solver</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmdatatable.html" title="Chapter 11 Data Table Display: mmDataTable ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Data Table Display: mmDataTable</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmgraph.html" title="Chapter 12 Data Graph Display: mmGraph ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Data Graph Display: mmGraph</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="html_mmdispdatascale.html" title="Chapter 13 Vector Field Display: mmDisp ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Vector Field Display: mmDisp</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmarchive.html" title="Chapter 14 Data Archive: mmArchive ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Data Archive: mmArchive</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mmhelp.html" title="Chapter 15 Documentation Viewer: mmHelp ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Documentation Viewer: mmHelp</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_cmdutils.html" title="Chapter 16 Command Line Utilities ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Command Line Utilities</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_mifformat.html" title="Chapter 17 Problem Specification File Formats (MIF) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>Problem Specification File Formats (MIF)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_odtformat.html" title="Chapter 18 Data Table File Format (ODT) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Data Table File Format (ODT)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_vfformats.html" title="Chapter 19 Vector Field File Format (OVF) ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Vector Field File Format (OVF)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_trouble.html" title="Chapter 20 Troubleshooting ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>Troubleshooting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="sec_credits.html" title="Chapter 21 Credits ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">21 </span>Credits</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bibliography.html" title="Bibliography ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Bibliography</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="index.html" title="Index ‣ OOMMF User’s Guide" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="sec_install.advanced.html" title="2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Advanced Installation</span></a><a href="sec_install.optimize.html" title="2.3.3 Optimization ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.3 </span>Optimization</span></a><a href="sec_install.platformnames.html" title="2.3.5 Managing OOMMF Platform Names ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.5 </span>Managing OOMMF Platform Names</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_subsection ltx_authors_1line">
<h1 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3.4 </span>Parallelization</h1>

<div id="p1" class="ltx_para">
<p class="ltx_p">The OOMMF Oxs 3D solvers (<span class="ltx_text ltx_font_typewriter">oxsii</span> and <span class="ltx_text ltx_font_typewriter">boxsi</span>) can be built
thread-enabled to allow parallel processing on
multi-processor/multi-core machines. In order to build and run a
parallel version of OOMMF, you must have a thread-enabled version of
Tcl. Most standard binary releases of Tcl today are thread-enabled,
so OOMMF releases that include pre-built executables are built
thread-enabled. If you build OOMMF from source, then by default
OOMMF will be built thread-enabled if your Tcl is thread-enabled.
As explained earlier, you can check thread build status with the
<span class="ltx_text ltx_font_typewriter">tclsh oommf.tcl +platform</span> command. If you want to force a
non-threaded build of OOMMF, then edit the <span class="ltx_text ltx_font_typewriter">config/platforms/</span> file
for your platform. In the section labeled <span class="ltx_text ltx_font_typewriter">LOCAL CONFIGURATION</span>, you
will find a line that looks like</p>
<pre class="ltx_verbatim ltx_font_typewriter">
# $config SetValue oommf_threads 0
</pre>
<p class="ltx_p">Uncomment this line (i.e., remove the leading ‘<code class="ltx_verbatim ltx_font_typewriter">#</code>’ character) to
force a non-threaded build. Then run</p>
<pre class="ltx_verbatim ltx_font_typewriter">
tclsh oommf.tcl pimake distclean
tclsh oommf.tcl pimake
</pre>
<p class="ltx_p">from the OOMMF root directory to create a fresh build.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">You can use the <span class="ltx_text ltx_font_typewriter">tclsh oommf.tcl +platform</span> command to see the
default number of compute threads that will be run by the Oxs 3D solver
programs <span class="ltx_text ltx_font_typewriter">oxsii</span> and <span class="ltx_text ltx_font_typewriter">boxsi</span>. You can modify the default as
explained in the <a href="sec_install.platformconfig.html" title="2.2.3 Check Your Platform Configuration ‣ 2.2 Basic Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref">Check Your Platform
Configuration</a> and <a href="sec_install.custom.html" title="2.3.2 Local Customizations ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref">Local
Customizations</a>
sections, or you can override the default at run time via the command
line option <span class="ltx_text ltx_font_typewriter">-threads</span> to <span class="ltx_text ltx_font_typewriter">oxsii</span> and <span class="ltx_text ltx_font_typewriter">boxsi</span>.</p>
</div>
<div id="p3" class="ltx_para">
<p class="ltx_p">Some multi-processor machines have a non-uniform memory
architecture (NUMA), which means that although each processor can access
all of system memory, some parts of memory can be accessed faster than
others. Typically this is accomplished by dividing the system memory
and processors into “nodes.” Memory accesses within a node are faster
than accesses between nodes, and depending on the architecture access
latency and bandwidth may be different between different node pairs.
Examples of machines with NUMA include some multi-processor AMD Opteron
and Intel Xeon boxes.</p>
</div>
<div id="p4" class="ltx_para">
<p class="ltx_p">Computer programs such as OOMMF can run on NUMA machines without
making any special allowances for the memory architecture. However, a
program that is written to take advantage of the faster local
(intra-node) memory accesses can sometimes run significantly faster.
OOMMF contains NUMA-aware code, but this code is highly operating
system specific. At present, OOMMF can be built with NUMA support
only on Linux (32- and 64-bit) systems. To do this, you must install
the operating system NUMA support packages “numactl” and
“numactl-devel”. The names may vary somewhat between Linux
distributions, but the first typically includes the executable
<span class="ltx_text ltx_font_typewriter">numactl</span> and the second includes the header file <span class="ltx_text ltx_font_typewriter">numa.h</span>. Once
the numactl package is installed, you can run the command</p>
<pre class="ltx_verbatim ltx_font_typewriter">
numactl --hardware
</pre>
<p class="ltx_p">to get an overview of the memory architecture on your machine. If this
shows you have only one node, then there is no advantage to making a
NUMA-aware build of OOMMF.</p>
</div>
<div id="p5" class="ltx_para">
<p class="ltx_p">The next step is to edit the <span class="ltx_text ltx_font_typewriter">config/platforms</span> for your platform.
For example, on a 64-bit Linux box this file is
<span class="ltx_text ltx_font_typewriter">config/platforms/linux-x86_64.tcl</span>.
In the section labeled <span class="ltx_text ltx_font_typewriter">LOCAL CONFIGURATION</span>, find the line</p>
<pre class="ltx_verbatim ltx_font_typewriter">
# $config SetValue use_numa 1
</pre>
<p class="ltx_p">Edit this to remove the leading ‘<code class="ltx_verbatim ltx_font_typewriter">#</code>’ character. Alternatively
(and, actually, preferably), create a <span class="ltx_text ltx_font_typewriter">local</span> subdirectory and make a
local configuration file with the same platform name; e.g.,
<span class="ltx_text ltx_font_typewriter">config/platforms/local/linux-x86_64.tcl</span> on a 64-bit Linux machine. Add
the line</p>
<pre class="ltx_verbatim ltx_font_typewriter">
$config SetValue use_numa 1
</pre>
<p class="ltx_p">to this file. (The advantage of using a <span class="ltx_text ltx_font_typewriter">config/platforms/local</span>
file is that you can make changes without modifying the original OOMMF source code, which makes it easier to port your local changes to future
releases of OOMMF.) If this is done correctly, then the command
‘<span class="ltx_text ltx_font_typewriter">tclsh oommf.tcl +platform</span>’ will show that NUMA support is enabled.
Then simply run ‘<span class="ltx_text ltx_font_typewriter">tclsh oommf.tcl pimake distclean</span>’ and
‘<span class="ltx_text ltx_font_typewriter">tclsh oommf.tcl pimake</span>’ from the OOMMF root directory to build a
NUMA-aware version of OOMMF.</p>
</div>
<div id="p6" class="ltx_para">
<p class="ltx_p">To activate the NUMA-aware code, you must specify the <span class="ltx_text ltx_font_typewriter">-numanodes</span>
option on the <span class="ltx_text ltx_font_typewriter">oxsii</span>/<span class="ltx_text ltx_font_typewriter">boxsi</span> command line, or set the the
environment variable
<span class="ltx_text ltx_font_typewriter">OOMMF_NUMANODES</span>.
Check the <a href="sec_oxs.html" title="Chapter 7 OOMMF eXtensible Solver ‣ OOMMF User’s Guide" class="ltx_ref">Oxs documention</a> for details.
</p>
</div>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="sec_install.optimize.html" title="2.3.3 Optimization ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.3 </span>Optimization</span></a><a href="sec_install.platformnames.html" title="2.3.5 Managing OOMMF Platform Names ‣ 2.3 Advanced Installation ‣ Chapter 2 Installation ‣ OOMMF User’s Guide" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3.5 </span>Managing OOMMF Platform Names</span></a><a href="index.html" title="Index ‣ OOMMF User’s Guide" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a>
</div></footer>
</div>
</body>
</html>
